<apex:page standardcontroller="PurchaseOrder__c"
           extensions="VFC04_POManageOrderLines"
           tabstyle="OrderLine__c"
           sidebar="false"
           showheader="false"
           standardstylesheets="false"
           action="{!onLoad}">
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

        <head>
            <apex:stylesheet value="{!URLFOR($Resource.slds, 'assets/styles/salesforce-lightning-design-system.min.css')}" />
            <apex:stylesheet value="{!URLFOR($Resource.MultiSwitch, 'multi-switch.min.css')}" />
            <apex:stylesheet value="{!URLFOR($Resource.VFP04, 'css/VFP04.css')}" />

            <!-- Initalise the global variable first as these values are used in the external javascript files -->
            <script>
                window.params = {
                                    "purchaseOrderStatus" : "{!currentPurchaseOrder.Status__c}",
                                    "purchaseOrderReason" : "{!currentPurchaseOrder.Reason__c}",
                                    "decimalSeparator" : "{!decimalSeparator}",
                                    "validatedMsg" : "{!JSENCODE($Label.PurchaseOrderAlreadyValidated)}",
                                    "locale" : "{!locale}",
                                    // URL For Icons
                                    "alternativeSVGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/action-sprite/svg/symbols.svg#change_record_type')}",
                                    "alternativePNGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/action/change_record_type_60.png')}",
                                    "bundleSVGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/custom-sprite/svg/symbols.svg#custom57')}",
                                    "bundlePNGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/custom/custom57_60.png')}",
                                    "addDiscountSVGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/utility-sprite/svg/symbols.svg#info')}",
                                    "addDiscountPNGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/utility/info_60.png')}",
                                    "complianceSVGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/utility-sprite/svg/symbols.svg#warning')}",
                                    "compliancePNGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/utility/warning_60.png')}",
                                    "removeSVGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/action-sprite/svg/symbols.svg#remove')}",
                                    "removePNGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/action/remove_60.png')}",
                                    "newSVGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/utility-sprite/svg/symbols.svg#new')}",
                                    "newPNGUrl" : "{!URLFOR($Resource.slds, '/assets/icons/utility/new_60.png')}",
                                    "closeSVGUrl": "{!URLFOR($Resource.slds, '/assets/icons/utility-sprite/svg/symbols.svg#close')}",
                                    "closePNGUrl": "{!URLFOR($Resource.slds, '/assets/icons/action/close_60.png')}",
                                    "userProfileName" : "{!JSENCODE($Profile.Name)}",
                                    "userRole" : "{!JSENCODE($UserRole.Name)}"
                                };
            </script>
            <apex:includescript value="{!URLFOR($Resource.jQueryDataTable, 'media/js/jquery.js')}" />
            <apex:includescript value="{!URLFOR($Resource.CurrencyFormatter, 'JsWorld.min.js')}" />
            <apex:includescript value="{!URLFOR($Resource.CurrencyFormatter, 'fr_FR_EURO.js')}" />
            <apex:includescript value="{!URLFOR($Resource.MultiSwitch, 'multi-switch.js')}" />
            <apex:includescript value="{!URLFOR($Resource.NumberFormatter)}" />
            <apex:includescript value="{!URLFOR($Resource.MathJS, 'math.min.js')}" />           
            <apex:includescript value="{!URLFOR($Resource.VFP04, 'js/VFP04_Icons.js')}" />
            <apex:includescript value="{!URLFOR($Resource.VFP04, 'js/VFP04_Process.js')}" />    
        </head>

        <body>
            <apex:form id="frm">
                <apex:outputfield value="{!PurchaseOrder__c.Status__c}"
                              rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.Reason__c}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.TECH_AssessmentCountryCode__c}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.Brand__c}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.Distributor__c}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.RecordType.Name}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.RecordTypeId}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.TotalPrice__c}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.TotalBSAmountDelivered__c}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.SLADeliveryEntryDate__c}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.Assessment__c}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.PrerequisiteOrder__c}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.Comment__c}"
                                rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.Name}"
                                  rendered="false" />
                <!-- DUN 14/02/2018 C-002313 - Button to add new orderline -->
                <apex:outputfield value="{!PurchaseOrder__c.Distributor__r.AdditionalPartButton__c}"
                                  rendered="false" />
                <!-- AMI 08/11/2018 : C-002045 - added condition to enable edit button when status = delivery confirmed but 
                                      there are still errored lines (applicable to adv case mgt only) -->
                <apex:outputfield value="{!PurchaseOrder__c.AcceptedLines__c}"
                                  rendered="false" />

                <apex:outputfield value="{!PurchaseOrder__c.DeliveredLines__c}"
                                  rendered="false" />

                <apex:outputfield value="{!PurchaseOrder__c.Canceled_Lines__c}"
                                  rendered="false" />
                <!-- WCH 09/10/2020 09/10/2020 C-003997  -->
                <apex:outputfield value="{!PurchaseOrder__c.TechInsuranceBroker__c}"
                                  rendered="false" />
                <apex:outputfield value="{!PurchaseOrder__c.TECH_AssessmentCountryCode__c}"
                                  rendered="false" />
                <div class="slds">
                    <div class="slds-form-element">
                        <div class="slds-card">
                            <!--<div class="slds-grid">
                                <div class="slds-col slds-size_1-of-5"></div>
                                <div class="slds-col slds-size_1-of-5">
                                    <div class="slds-button-group slds-grid_align-end" role="group">
                                        <apex:outputtext rendered="{!!isPageReadOnly}">
                                            <apex:commandbutton action="{!setEditMode}"
                                                                value="{!$Label.EditMode}"
                                                                styleclass="slds-button slds-button_neutral"
                                                                rendered="{!!isEditable}"
                                                                rerender="frm"
                                                                status="statusSpinner" />
                                            <apex:commandbutton action="{!setAllSuppliableAndDelivery}"
                                                                value="{!$Label.SuppliableButton}"
                                                                styleclass="slds-button slds-button_neutral"
                                                                rendered="{!isEditable && isQuotation}"
                                                                rerender="frm"
                                                                status="statusSpinner" />
                                        </apex:outputtext>
                                    </div>
                                </div>
                                <div class="slds-col slds-size_1-of-5"></div>
                                <div class="slds-col slds-size_1-of-5">
                                    <div class="slds-button-group" role="group">
                                        <apex:commandbutton action="{!saveAllChanges}"
                                                                    value="{!$Label.SaveAllChanges}"
                                                                    styleclass="slds-button slds-button_neutral noWrap"
                                                                    rendered="{!isEditable}"
                                                                    rerender="frm"
                                                                    status="statusSpinner" />

                                        <apex:outputtext rendered="{!!canBeValidated && isQuotation}">
                                            <input type="button"
                                                class="slds-button slds-button_neutral"
                                                value="{!$Label.Validate}"
                                                disabled="disabled" />
                                        </apex:outputtext>
                                        <apex:outputtext rendered="{!canBeValidated && isQuotation}">
                                            <input type="button"
                                                class="slds-button slds-button_neutral"
                                                value="{!$Label.Validate}"
                                                onclick="showModal();" />
                                        </apex:outputtext>
                                    </div>
                                </div>
                                <div class="slds-col slds-size_1-of-5"></div>
                            </div>-->

                            <div class="slds-grid slds-grid_align-center"> 
                                <div class="slds-button-group" role="group">
                                    <apex:outputtext rendered="{!!isPageReadOnly && NOT(hasStatusPredraftQuote)}">
                                        <!-- AMI 04/10/18 : C-002045 - added js to remove status when case mgt is not enabled -->
                                        <apex:commandbutton action="{!setEditMode}"
                                                            value="{!$Label.EditMode}"
                                                            styleclass="slds-button slds-button_neutral"
                                                            rendered="{!!isEditable}"
                                                            rerender="frm"
                                                            status="statusSpinner"
                                                            oncomplete="removeStatus()" />
                                        <!-- WCH 05/08/2019 C-003247 - added onclick action-->                    
                                        <apex:commandbutton onclick="checkTechExtraAsDiscount();" 
                                                            action="{!saveAllChanges}"
                                                            value="{!$Label.SaveAllChanges}"
                                                            styleclass="slds-button slds-button_neutral clickOnce"
                                                            rendered="{!isEditable}"
                                                            rerender="frm"
                                                            status="statusSpinner" 
                                                            oncomplete="renderColoredStatus()"/>
                                        <apex:commandbutton action="{!setAllSuppliableAndDelivery}"
                                                            value="{!$Label.SuppliableButton}"
                                                            styleclass="slds-button slds-button_neutral"
                                                            rendered="{!isEditable && isQuotation}"
                                                            rerender="frm"
                                                            status="statusSpinner" />
                                        <apex:outputtext rendered="{!!canBeValidated && isQuotation}">
                                            <input type="button"
                                                class="slds-button slds-button_neutral"
                                                value="{!$Label.Validate}"
                                                disabled="disabled" />
                                        </apex:outputtext>
                                        <apex:outputtext rendered="{!canBeValidated && isQuotation}">
                                            <input type="button"
                                                class="slds-button slds-button_neutral"
                                                value="{!$Label.Validate}"
                                                onclick="showModal();" />
                                        </apex:outputtext>
                                        <!-- DUN 14/02/2018 C-002313 - Button to add new orderline -->
                                        <apex:commandButton action="{!addNewPlOlOff}"
                                                            value="{!$Label.AddALine}"
                                                            styleclass="slds-button slds-button_neutral"
                                                            rendered="{!isEditable && displayAddOLButton}"
                                                            rerender="frm"
                                                            status="statusSpinner" />
                                        <!-- WCH 20/05/2019 C-003129 - Update Stock info button location is not usefull -->
                                        <apex:outputtext rendered="true">
                                            <input Id="UpdateStockInfoButton" type="button"
                                                class="slds-button slds-button_neutral"
                                                value="{!$Label.UpdateStockInfo}" />
                                        </apex:outputtext>

                                        <!-- ARA 01/09/2020 c-003914 - Button 'Order Confirmation' on PO -->
                                        <apex:commandButton action="{!callsendOrderConfirmation}"
                                        value="{!$Label.OrderConfirmationButton}"
                                        styleclass="slds-button slds-button_neutral orderconfirmationbutton"
                                        rendered="{!IF (currentPurchaseOrder.Status__c ='INDELIVERY' && currentPurchaseOrder.TECH_AssessmentCountryCode__c='DE',true,false)}"
                                        disabled="{!IF(OrderAutomatically=true,true,false)}"
                                        oncomplete="reloadParent();" />

                                        <!-- RLA 21/10/2020 C-004025 - IG - Re launch Order Call for EFA/NORA -->
                                        <apex:commandButton action="{!callSendToDistributor}"
                                        value="{!$Label.SendtoDistributorButton}"
                                        styleclass="slds-button slds-button_neutral orderconfirmationbutton"
                                        rendered="{!IF (canRelaunchOrderCall,true,false)}"
                                        oncomplete="reloadParent();" />
    
                                    </apex:outputtext>
                                </div>

                                <apex:outputText styleClass="slds-text-align_center"
                                                 value="{!$Label.POPredraftQuote}"
                                                 rendered="{!hasStatusPredraftQuote}"/>
                            </div>

                            <!--<apex:pagemessages />-->

                            <div class="slds-card__body">
                                <apex:variable var="numberOfWrapperInSuppliedByAS" value="{!0}" />
                                <apex:variable var="numberOfWrapperInNotSelectedByDistributor" value="{!0}" />
                                <apex:variable var="numberOfWrapperInCanceledByBodyShop" value="{!0}" />
                                <apex:variable var="numberOfWrapperInNotSelectedByBodyShop" value="{!0}" />
                                <apex:variable var="numberOfWrapperInSuppliedByAS_NewOL" value="{!0}" /><!-- WCH 18/06/2019 C-003293 -->

                                <apex:repeat var="originalOrderLineId" value="{!mapIdOrderLineWrapper}">
                                    <apex:variable var="numberOfWrapperInSuppliedByAS" 
                                                    value="{!IF(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine != null &&
                                                                ((isQuotation && mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c != 'NO') ||
                                                                (!isQuotation && mapIdOrderLineWrapper[originalOrderLineId].isSuppliedByAS)
                                                                ), numberOfWrapperInSuppliedByAS + 1, numberOfWrapperInSuppliedByAS)}" />
                                    <apex:variable var="numberOfWrapperInSuppliedByAS" 
                                                    value="{!IF(mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginal &&
                                                                ((isQuotation && mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c != 'NO') ||
                                                                 (!isQuotation && mapIdOrderLineWrapper[originalOrderLineId].isSuppliedByAS))
                                                                , numberOfWrapperInSuppliedByAS + 1, numberOfWrapperInSuppliedByAS)}" />

                                    <apex:variable var="numberOfWrapperInNotSelectedByDistributor" 
                                                    value="{!IF(mapIdOrderLineWrapper[originalOrderLineId].isNotSelectedByDistributor,numberOfWrapperInNotSelectedByDistributor + 1, numberOfWrapperInNotSelectedByDistributor)}" />
                                    <!-- WCH 08/03/2019 C-003072 : PO "Not Selected by Bodyshop" Section appearing even without parts -->
                                    <apex:variable var="numberOfWrapperInCanceledByBodyShop" 
                                                    value="{!IF(AND(mapIdOrderLineWrapper[originalOrderLineId].isCanceledByBodyshop,mapIdOrderLineWrapper[originalOrderLineId].isPreselectedForOrder == hasPreselectedParts),numberOfWrapperInCanceledByBodyShop + 1, numberOfWrapperInCanceledByBodyShop)}" />
                                    <!-- WCH 08/03/2019 C-003072 : PO "Not Selected by Bodyshop" Section appearing even without parts -->
                                    <apex:variable var="numberOfWrapperInNotSelectedByBodyShop" 
                                                    value="{!IF(AND(mapIdOrderLineWrapper[originalOrderLineId].isNotSelectedByBodyshop,mapIdOrderLineWrapper[originalOrderLineId].isPreselectedForOrder == hasPreselectedParts),numberOfWrapperInNotSelectedByBodyShop + 1, numberOfWrapperInNotSelectedByBodyShop)}" />
                                </apex:repeat>
                                
                                <!-- WCH 18/06/2019 C-003293 -->
                                <apex:repeat var="finalOrderLineWrapper" value="{!listnewOrderline}">
                                    <apex:variable var="numberOfWrapperInSuppliedByAS_NewOL" 
                                                    value="{!IF(finalOrderLineWrapper.finalOrderLine.Suppliable__c != 'NO', numberOfWrapperInSuppliedByAS_NewOL + 1, numberOfWrapperInSuppliedByAS_NewOL)}" />
                                </apex:repeat>

                                <apex:variable var="rowNumber" value="{!0}" />
                                <apex:variable var="rowNumberNewOL" value="{!0}" />
                                <!-- -------------------------------------- SUPPLIED BY AS ---------------------------------------------- -->
                                <apex:outputText rendered="{!OR(numberOfWrapperInSuppliedByAS > 0,numberOfWrapperInSuppliedByAS_NewOL>0) }"><!-- WCH 18/06/2019 C-003293 -->
                                    <div class="slds-card__header slds-grid grid_flex-spread">
                                        <h2 class="slds-text-heading_small slds-truncate">{!$Label.SuppliedBy}</h2>
                                    </div>
                                    <table class="slds-table slds-table_bordered">
                                        <thead>
                                            <tr>
                                                <td class="slds-text-heading_label" colspan="2">{!$ObjectType.OrderLine__c.fields.PartNumber__c.label}</td>
                                                <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Type__c.label}</td>
                                                <td class="slds-text-heading_label">{!$ObjectType.OrderLine__c.fields.Description__c.label}</td>
                                                <td class="slds-text-heading_label">{!$ObjectType.OrderLine__c.fields.Manufacturer__c.label}</td>
                                                <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                    <td class="slds-text-heading_label">{!$Label.POOL_Family}</td>
                                                    <td class="slds-text-heading_label">{!$Label.POOL_Brand}</td>
                                                </apex:outputtext>
                                                <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDEXPECTDELIVERY}</td>
                                                <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDUNITPRICE}</td>
                                                <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDQUANTITY}</td>
                                                <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDTOTALPRICE}</td>
                                                <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXADISCOUNT}</td>
                                                    <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Rebate__c.label}</td>
                                                    </apex:outputText>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDBSDISCOUNT}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXATOTALPRICE}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDCOMPLIANT}</td>
                                                </apex:outputtext>
                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFDistributorCode}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXADISCOUNT}</td>
                                                    <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Rebate__c.label}</td>
                                                    </apex:outputText>
                                                    <apex:outputtext rendered="{!IF(currentPurchaseOrder.TECH_AssessmentCountryCode__c!='DE',true,false)}">
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFExtraAS}</td>
                                                    </apex:outputtext>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXATOTALPRICE}</td>
                                                </apex:outputtext>
                                                <apex:outputtext rendered="{!isQuotation}">
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDSUPPLIABLE}</td>
                                                </apex:outputtext>
                                                <apex:outputtext rendered="{!!isQuotation}">
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDDELIVERY}</td>
                                                </apex:outputtext>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <apex:variable var="noOfSuppliableRows" value="{!0}" />
                                            <!-- DUN 14/02/2018 C-002313 - Button to add new orderline -->
                                            <apex:outputText rendered="{!listnewOrderline.size > 0}">
                                                <apex:repeat var="newOrderLine" value="{!listnewOrderline}">
                                                    <tr>
                                                        <td colspan="2" class="slds-text-body_regular">
                                                            <apex:inputfield value="{!newOrderLine.finalOrderLine.PartNumber__c}" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:inputfield value="{!newOrderLine.finalOrderLine.Type__c}"/>

                                                        </td>
                                                        <td class="slds-text-body_regular slds-truncate">
                                                            <apex:inputfield value="{!newOrderLine.finalOrderLine.Description__c}"/>
                                                        </td>
                                                        <td class="slds-text-body_regular slds-truncate">
                                                            <apex:inputfield value="{!newOrderLine.finalOrderLine.Manufacturer__c}"/>
                                                        </td>
                                                        <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                            <td class="slds-text-body_regular slds-truncate">
                                                                <apex:outputfield value="{!newOrderLine.finalOrderLine.FamilyOfSparePart__c}"/>
                                                            </td>
                                                            <td class="slds-text-body_regular slds-truncate">
                                                                <apex:outputfield value="{!newOrderLine.finalOrderLine.BrandOfSparePart__c}"/>
                                                            </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:inputfield value="{!newOrderLine.finalOrderLine.ExpectedDeliveryDuration__c}"/>
                                                        </td> 
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:inputfield value="{!newOrderLine.finalOrderLine.CataloguePrice__c}"
                                                                            styleclass="unitPrice cataloguePriceNew_{!rowNumberNewOL}"
                                                                            onchange="calculateTotalForANewRow({!rowNumberNewOL});"
                                                                            onfocus="return numerizeIt(this, '{!decimalSeparator}');" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:inputfield value="{!newOrderLine.finalOrderLine.Quantity__c}"
                                                                            rendered="{!isEditable && isQuotation}"
                                                                            styleclass="quantity quantityNew_{!rowNumberNewOL}"
                                                                            onchange="calculateTotalForANewRow({!rowNumberNewOL});"
                                                                            onfocus="return numerizeIt(this, '{!decimalSeparator}');" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext value="{!newOrderLine.finalOrderLine.TotalPrice__c}"
                                                                            styleclass="totalPriceNew_{!rowNumberNewOL} {!IF(newOrderLine.finalOrderLine.Suppliable__c == 'YES', 'totalPriceWithoutDiscount', '')}"
                                                                            rendered="{!isEditable && isQuotation}" />
                                                        </td>
                                                        <apex:outputtext rendered="{!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:selectlist value="{!newOrderLine.finalOrderLine.Discount__c}"
                                                                                size="1"
                                                                                onchange="changeDistributorCode('{!newOrderLine.finalOrderLine.Id}');"
                                                                                rendered="{!   isEditable &&
                                                                                                (isQuotation || (!isQuotation && hasPORectificationRights && !newOrderLine.isFinalAlternativeDelivered))}">
                                                                    <apex:selectoptions value="{!newOrderLine.finalOrderLineDistributorCodeOptions}" />
                                                                </apex:selectlist>
                                                            </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:inputfield value="{!newOrderLine.finalOrderLine.AXADiscount__c}"
                                                                            rendered="{!isEditable &&
                                                                                        !hasDiscountManagement &&
                                                                                        (isQuotation || (!isQuotation && hasPORectificationRights && !newOrderLine.isFinalOriginalDelivered))}"
                                                                            styleclass="asDiscount axaDiscountNew_{!rowNumberNewOL} initialiseClear"
                                                                            onchange="copyASDiscountToBodyShopDiscountNew({!rowNumberNewOL});calculateTotalForANewRow({!rowNumberNewOL});"
                                                                            onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                        </td>
                                                        <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:inputfield value="{!newOrderLine.finalOrderLine.Rebate__c}"
                                                                                rendered="{!isEditable &&
                                                                                            !hasDiscountManagement &&
                                                                                            (isQuotation || (!isQuotation && hasPORectificationRights && !newOrderLine.isFinalOriginalDelivered))}"
                                                                                styleclass="rebate rebateNew_{!rowNumberNewOL} initialiseClear"
                                                                                onchange="calculateTotalForANewRow({!rowNumberNewOL});"
                                                                                onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                            </td>                                                            
                                                        </apex:outputText>
                                                        

                                                        <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:inputfield value="{!newOrderLine.finalOrderLine.BodyShopDiscount__c}"
                                                                                rendered="{!isEditable && !newOrderLine.isDistributorPrice &&
                                                                                            (isQuotation || (!isQuotation && hasPORectificationRights && !newOrderLine.isFinalOriginalDelivered))}"
                                                                                styleclass="bsDiscount bodyShopDiscountNew_{!rowNumberNewOL} initialiseClear"
                                                                                onchange="calculateTotalForANewRow({!rowNumberNewOL});"
                                                                                onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                            </td>
                                                        </apex:outputtext>

                                                        <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:inputfield value="{!newOrderLine.finalOrderLine.TECH_ExtraAS__c}"
                                                                                rendered="{!   isEditable &&
                                                                                                (isQuotation || (!isQuotation && hasPORectificationRights && !newOrderLine.isFinalAlternativeDelivered
                                                                                                )) }"
                                                                                styleclass="extraAS extraASNew_{!rowNumberNewOL} initialiseClearNegative"
                                                                                onchange="calculateTotalForANewRow({!rowNumberNewOL});"
                                                                                onfocus="return numerizeItWithNegative(this, '{!decimalSeparator}');" />
                                                            </td>
                                                        </apex:outputtext>
                                                        
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                <apex:outputtext value="{!newOrderLine.finalOrderLine.TECH_ExtraAS__c}"
                                                                                styleclass="extraASNew_{!rowNumberNewOL}"
                                                                                style="display:none;" />
                                                            </apex:outputtext>
                                                            <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                <apex:outputtext value="{!newOrderLine.finalOrderLine.BodyShopDiscount__c}"
                                                                                styleclass="bodyShopDiscountNew_{!rowNumberNewOL}"
                                                                                style="display:none;" />
                                                            </apex:outputtext>
                                                            <apex:outputtext value="{!newOrderLine.finalOrderLine.AdditionnalDiscount__c}"
                                                                            styleclass="addDiscountNew_{!rowNumberNewOL}"
                                                                            style="display:none;" />
                                                            <apex:outputtext value="{!newOrderLine.finalOrderLine.AdditionalDiscountAmount__c}"
                                                                            styleclass="addDiscountAmountNew_{!rowNumberNewOL}"
                                                                            style="display:none;" />
                                                            <apex:outputtext value="{!newOrderLine.finalOrderLine.Rebate__c}"
                                                                            styleclass="rebateNew_{!rowNumberNewOL}"
                                                                            style="display:none;"
                                                                            rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                        (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                            <apex:outputtext value="{!newOrderLine.finalOrderLine.BodyshopTotalPrice__c}"
                                                                            styleclass="bsTotalPriceNew_{!rowNumberNewOL} {!IF(newOrderLine.finalOrderLine.Suppliable__c == 'YES', 'bsGrandTotal', '')}"
                                                                            style="display:none;" />
                                                            <apex:outputtext value="{!newOrderLine.finalOrderLine.AXATotalPrice__c}"
                                                                            styleclass="axaTotalPriceNew_{!rowNumberNewOL} {!IF(newOrderLine.finalOrderLine.Suppliable__c == 'YES', 'axaGrandTotal', '')}" />
                                                            
                                                            <apex:outputpanel rendered="{!newOrderLine.finalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                <div class="popOverParent">
                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                    </span>
                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                        role="tooltip">
                                                                        <div class="slds-popover__body">
                                                                            {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                            <apex:outputfield value="{!newOrderLine.finalOrderLine.AdditionalDiscountAmount__c}" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputpanel>
                                                            <apex:outputpanel rendered="{!  newOrderLine.finalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                            newOrderLine.finalOrderLine.AdditionnalDiscount__c != null &&
                                                                                            newOrderLine.finalOrderLine.AdditionnalDiscount__c != 0}">
                                                                <div class="popOverParent">
                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                    </span>
                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                        role="tooltip">
                                                                        <div class="slds-popover__body">
                                                                            {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                            <apex:outputfield value="{!newOrderLine.finalOrderLine.AdditionnalDiscount__c}" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputpanel>
                                                        </td>
                                                        <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputpanel rendered="{!!newOrderLine.finalOrderLine.PartList__r.Compliance__c}">
                                                                    <span class="slds-icon_container svgCompliance">
                                                                    </span>
                                                                </apex:outputpanel>
                                                            </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_left">
                                                            <apex:outputtext rendered="{!isQuotation}">
                                                                <apex:outputpanel rendered="{!!isEditable}">
                                                                    <input type="checkbox"
                                                                        class="multi-switch"
                                                                        unchecked-value="NO"
                                                                        checked-value="YES"
                                                                        value="{!newOrderLine.finalOrderLine.Suppliable__c}"
                                                                        wrapperid="{!newOrderLine.finalOrderLine.Id}"
                                                                        disabled="disabled" />
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!isEditable}">
                                                                    <input type="checkbox"
                                                                        class="multi-switch"
                                                                        unchecked-value="NO"
                                                                        checked-value="YES"
                                                                        value="{!newOrderLine.finalOrderLine.Suppliable__c}"
                                                                        wrapperid="{!newOrderLine.finalOrderLine.Id}" />
                                                                </apex:outputpanel>
                                                                <!-- <span class="slds-icon_container"
                                                                    title="{!$Label.AddOrderLine}">
                                                                    <apex:commandlink action="{!addNewOrderLine}"
                                                                                    rendered="{!isEditable && NOT(newOrderLine.isDistributorPrice)}"
                                                                                    styleclass="svgNew"
                                                                                    rerender="frm"
                                                                                    status="statusSpinner">
                                                                        <apex:param name="wrapperId"
                                                                                    value="{!newOrderLine.finalOrderLine.Id}"
                                                                                    assignto="{!wrapperId}" />
                                                                    </apex:commandlink>
                                                                </span> -->
                                                            </apex:outputtext>
                                                        </td>
                                                    </tr>
                                                    <apex:variable var="noOfSuppliableRows" value="{!IF(newOrderLine.finalOrderLine.Suppliable__c == 'YES', noOfSuppliableRows + 1, noOfSuppliableRows)}" />
                                                    <apex:variable var="rowNumberNewOL" value="{!rowNumberNewOL + 1}" />
                                                </apex:repeat>
                                            </apex:outputText>
                                            <apex:repeat var="originalOrderLineId" value="{!mapIdOrderLineWrapper}">
                                                <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine != null &&
                                                                            (
                                                                                (
                                                                                    isQuotation &&
                                                                                    mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c != 'NO'
                                                                                ) ||
                                                                                (   
                                                                                    !isQuotation &&
                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isSuppliedByAS
                                                                                )
                                                                            ) && mapIdOrderLineWrapper[originalOrderLineId].isPreselectedForOrder == hasPreselectedParts}">
                                                    <!--<apex:variable var="numberOfWrapperInSuppliedByAS" value="{!numberOfWrapperInSuppliedByAS + 1}" />-->
                                                    <tr>
                                                        <td colspan="2" class="slds-text-body_regular">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.PartNumber__c}</td>
                                                        <td class="slds-text-body_regular slds-text-align_center">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c}</td>
                                                        <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Description__c}</td>
                                                        <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Manufacturer__c}</td>
                                                        <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                            <td class="slds-text-body_regular slds-truncate">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.FamilyOfSparePart__c}" rendered="{!!isEditable}" />
                                                                <apex:selectList styleClass="OLFamily" value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.FamilyOfSparePart__c}" size="1" rendered="{!isEditable && !( mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative || mapIdOrderLineWrapper[originalOrderLineId].isBundle || !(!ISBLANK(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c) && mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c=='A'))}"> 
                                                                    <apex:selectOptions value="{!mapIdOrderLineWrapper[originalOrderLineId].oLFamily}"/> 
                                                                </apex:selectList>
                                                                <apex:selectList styleClass="OLFamily" value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.FamilyOfSparePart__c}" size="1" onChange="updateFamilyBrandOptions('{!originalOrderLineId}',this.value);" rendered="{!isEditable && !( mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative || mapIdOrderLineWrapper[originalOrderLineId].isBundle || (!ISBLANK(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c) && mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c=='A'))}"> 
                                                                    <apex:selectOptions value="{!mapIdOrderLineWrapper[originalOrderLineId].oLFamily}"/> 
                                                                </apex:selectList>
                                                            </td>
                                                            <td class="slds-text-body_regular slds-truncate">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BrandOfSparePart__c}" rendered="{!!isEditable || (isEditable && ( mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative || mapIdOrderLineWrapper[originalOrderLineId].isBundle || (!ISBLANK(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c) && mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c=='A')))}" />
                                                                <apex:selectList styleClass="OLBrand" value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BrandOfSparePart__c}" size="1" rendered="{!isEditable && !( mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative || mapIdOrderLineWrapper[originalOrderLineId].isBundle || (!ISBLANK(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c) && mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c=='A'))}"> 
                                                                    <apex:selectOptions value="{!mapIdOrderLineWrapper[originalOrderLineId].oLBrand}"/>
                                                                </apex:selectList>
                                                            </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext rendered="{!isQuotation}">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.ExpectedDeliveryDuration__c}"
                                                                                rendered="{!!isEditable ||
                                                                                            ( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />

                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.ExpectedDeliveryDuration__c}"
                                                                                rendered="{!isEditable &&
                                                                                            !(
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                            </apex:outputtext>
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext rendered="{!isQuotation}">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.CataloguePrice__c}"
                                                                                styleclass="unitPrice cataloguePrice_{!rowNumber} cataloguePrice"
                                                                                rendered="{!!isEditable ||
                                                                                            (
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.CataloguePrice__c}"
                                                                                rendered="{!isEditable &&
                                                                                            !(
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}"
                                                                                styleclass="unitPrice cataloguePrice_{!rowNumber}"
                                                                                onchange="calculateTotalForARow({!rowNumber});"
                                                                                onfocus="return numerizeIt(this, '{!decimalSeparator}');" />
                                                            </apex:outputtext>
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext rendered="{!isQuotation}">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Quantity__c}"
                                                                                styleclass="quantity_{!rowNumber}"
                                                                                rendered="{!!isEditable ||
                                                                                            (
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Quantity__c}"
                                                                                rendered="{!isEditable &&
                                                                                            !(
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}"
                                                                                styleclass="quantity quantity_{!rowNumber}"
                                                                                onchange="calculateTotalForARow({!rowNumber});"
                                                                                onfocus="return numerizeIt(this, '{!decimalSeparator}');" />
                                                            </apex:outputtext>
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext rendered="{!isQuotation}">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TotalPrice__c}"
                                                                                styleclass="totalPrice_{!rowNumber} {!IF(!(mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                                            mapIdOrderLineWrapper[originalOrderLineId].isBundle) && 
                                                                                                                            mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', 'totalPriceWithoutDiscount', '')}" />
                                                            </apex:outputtext>
                                                        </td>
                                                        <apex:outputtext rendered="{!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext rendered="{!isQuotation}">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Discount__r.DistributorCode__c}"
                                                                                    rendered="{!!isEditable ||
                                                                                                (  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle)}" />
                                                                    <apex:selectlist value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Discount__c}"
                                                                                    size="1"
                                                                                    onchange="changeDistributorCode('{!originalOrderLineId}');"
                                                                                    rendered="{!isEditable &&
                                                                                                !( mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle)}">
                                                                        <apex:selectoptions value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLineDistributorCodeOptions}" />
                                                                    </apex:selectlist>
                                                                </apex:outputtext>
                                                            </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext rendered="{!isQuotation}">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="asDiscount axaDiscount_{!rowNumber}"
                                                                                rendered="{!!isEditable ||
                                                                                            (  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle) ||
                                                                                            hasDiscountManagement}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXADiscount__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXADiscount__c}"
                                                                                 styleClass="asDiscount axaDiscount_{!rowNumber} percentage"
                                                                                 rendered="{!!isEditable ||
                                                                                            (  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle) ||
                                                                                            hasDiscountManagement}" />
                                                               <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXADiscount__c}"
                                                                                rendered="{!isEditable &&
                                                                                            !hasDiscountManagement &&
                                                                                        !( mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].isBundle)}"
                                                                                styleclass="asDiscount axaDiscount_{!rowNumber} initialiseClear"
                                                                                onchange="copyASDiscountToBodyShopDiscount({!rowNumber});calculateTotalForARow({!rowNumber});"
                                                                                onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                            </apex:outputtext>
                                                        </td>
                                                        <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext rendered="{!isQuotation}">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="rebate rebate_{!rowNumber}"
                                                                                    rendered="{!!isEditable ||
                                                                                                (   mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle) ||
                                                                                                hasDiscountManagement}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}"
                                                                                 styleClass="rebate rebate_{!rowNumber} percentage"
                                                                                 rendered="{!!isEditable ||
                                                                                                (   mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle) ||
                                                                                                hasDiscountManagement}" />
                                                                    <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}"
                                                                                    rendered="{!isEditable &&
                                                                                                !hasDiscountManagement &&
                                                                                            !(  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle)}"
                                                                                    styleclass="rebate rebate_{!rowNumber} initialiseClear"
                                                                                    onchange="calculateTotalForARow({!rowNumber});"
                                                                                    onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                                </apex:outputtext>
                                                            </td>
                                                        </apex:outputText>
                                                        <!-- <td class="slds-text-body_regular slds-text-align_center"> -->
                                                        <apex:outputtext rendered="{!isQuotation}">
                                                            <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="bsDiscount bodyShopDiscount_{!rowNumber}"
                                                                                    rendered="{! !isEditable || mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice || 
                                                                                        (  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].isBundle)}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}"
                                                                                 styleClass="bsDiscount bodyShopDiscount_{!rowNumber} percentage"
                                                                                 rendered="{! !isEditable || mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice || 
                                                                                        (  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].isBundle)}" />
                                                                    <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}"
                                                                                    rendered="{!isEditable && !mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice &&
                                                                                        !( mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].isBundle)}"
                                                                                    styleclass="bsDiscount bodyShopDiscount_{!rowNumber} initialiseClear"
                                                                                    onchange="calculateTotalForARow({!rowNumber});"
                                                                                    onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="extraAS extraAS_{!rowNumber}"
                                                                                    rendered="{!!isEditable ||
                                                                                                (   mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle)}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage"
                                                                                    rendered="{!!isEditable ||
                                                                                                (   mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle)}" />
                                                                    
                                                                    <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}"
                                                                                    rendered="{!isEditable &&
                                                                                                    !( mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                        mapIdOrderLineWrapper[originalOrderLineId].isBundle)}"
                                                                                    styleclass="extraAS extraAS_{!rowNumber} initialiseClearNegative"
                                                                                    onchange="calculateTotalForARow({!rowNumber});"
                                                                                    onfocus="return numerizeItWithNegative(this, '{!decimalSeparator}');" />
                                                                    </td>
                                                                </apex:outputtext>
                                                            </apex:outputtext>
                                                        <!-- </td> -->
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext rendered="{!isQuotation}">
                                                                <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleclass="extraAS_{!rowNumber}"
                                                                                    style="display:none;" />
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}"
                                                                                    styleclass="bodyShopDiscount_{!rowNumber}"
                                                                                    style="display:none;" />
                                                                </apex:outputtext>
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c}"
                                                                                styleclass="addDiscount_{!rowNumber}"
                                                                                style="display:none;" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c}"
                                                                                styleclass="addDiscountAmount_{!rowNumber}"
                                                                                style="display:none;" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}"
                                                                                styleclass="rebate_{!rowNumber}"
                                                                                style="display:none;"
                                                                                rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                            (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyshopTotalPrice__c}"
                                                                                styleclass="bsTotalPrice_{!rowNumber} {!IF(!(mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle) && mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', 'bsGrandTotal', '')}"
                                                                                style="display:none;" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXATotalPrice__c}"
                                                                                styleclass="axaTotalPrice_{!rowNumber} {!IF(!(mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle) && mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', 'axaGrandTotal', '')}" />

                                                                <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                    <div class="popOverParent">
                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                        </span>
                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                            role="tooltip">
                                                                            <div class="slds-popover__body">
                                                                                {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c}" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!  mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c != null &&
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c != 0}">
                                                                    <div class="popOverParent">
                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                        </span>
                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                            role="tooltip">
                                                                            <div class="slds-popover__body">
                                                                                {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c}" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                            </apex:outputtext>
                                                        </td>
                                                        <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext rendered="{!isQuotation}">
                                                                    <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.PartList__r.Compliance__c}">
                                                                        <span class="slds-icon_container svgCompliance">
                                                                        </span>
                                                                    </apex:outputpanel>
                                                                </apex:outputtext>
                                                            </td>
                                                        </apex:outputtext>
                                                        <apex:outputText rendered="{!(PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'FR' && PurchaseOrder__c.Status__c != 'DRAFTQUOTE')|| PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'ES' || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'BE' || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'IT'}">
                                                        <td></td>
                                                        </apex:outputText><!--vsu 21/03/18 correct rendering for FR-->
                                                        <td class="slds-text-body_regular slds-text-align_center"
                                                            rowspan="{!mapIdOrderLineWrapper[originalOrderLineId].rowSpan}">
                                                            <apex:outputtext rendered="{!isQuotation}">
                                                                <apex:outputpanel rendered="{!!isEditable}">
                                                                    <input type="checkbox"
                                                                            class="multi-switch"
                                                                            unchecked-value="NO"
                                                                            checked-value="YES"
                                                                            value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c}"
                                                                            wrapperid="{!originalOrderLineId}"
                                                                            disabled="disabled" />
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!isEditable}">
                                                                    <input type="checkbox"
                                                                            class="multi-switch"
                                                                            unchecked-value="NO"
                                                                            checked-value="YES"
                                                                            value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c}"
                                                                            wrapperid="{!originalOrderLineId}" />
                                                                </apex:outputpanel>
                                                        
                                                                <span class="slds-icon_container"
                                                                    title="{!$Label.AddOrderLine}">
                                                                    <apex:commandlink action="{!addNewOrderLine}"
                                                                                    rendered="{!isEditable && NOT(mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice)}"
                                                                                    styleclass="svgNew"
                                                                                    rerender="frm"
                                                                                    status="statusSpinner">
                                                                        <apex:param name="wrapperId"
                                                                                    value="{!originalOrderLineId}"
                                                                                    assignto="{!wrapperId}" />
                                                                    </apex:commandlink>
                                                                </span>
                                                            </apex:outputtext>
                                                            <apex:outputtext rendered="{!!isQuotation}">
                                                                <!-- AMI 04/10/18 : C-002045 - color status red if advanced case management is enabled + adding new statuses "managed,cancelled,returned" -->
                                                                <!-- <span data-hasError="{!mapIdOrderLineWrapper[originalOrderLineId].isOriginalOfferErrored}" style="{!IF(isEditable == true,'display:none','')}" data-statusmanaged="{!mapIdOrderLineWrapper[originalOrderLineId].isManaged}"> -->
                                                                <!-- AMI 06/02/18 : C-3057 - allowing local admin to pass parts to error or managed if there are alternatives or bundles -->
                                                                <span data-hasError="{!IF(mapIdOrderLineWrapper[originalOrderLineId].isOriginalOfferErrored == true || mapIdOrderLineWrapper[originalOrderLineId].isFinalOfferErrored == true, true,false)}" style="{!IF(isEditable == true,'display:none','')}" data-statusmanaged="{!mapIdOrderLineWrapper[originalOrderLineId].isManaged}">
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.DeliveryStatus__c}"/>
                                                                </span>
                                                                
                                                                <!-- <span data-isErrored="{!mapIdOrderLineWrapper[originalOrderLineId].isOriginalOfferErrored}" > -->
                                                                <!-- AMI 06/02/18 : C-3057 - allowing local admin to pass parts to error or managed if there are alternatives or bundles -->
                                                                <span data-isErrored="{!IF(mapIdOrderLineWrapper[originalOrderLineId].isOriginalOfferErrored == true || mapIdOrderLineWrapper[originalOrderLineId].isFinalOfferErrored == true, true,false)}">
                                                                    <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.DeliveryStatus__c}"
                                                                                rendered="{!isEditable}"/>
                                                                </span>

                                                                <apex:outputText rendered="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.DeliveryStatus__c == 'ISSUE' &&
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.DeliveryStatusReason__c != null}">
                                                                    <div>
                                                                        {!$Label.Reason}: &nbsp;
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.DeliveryStatusReason__c}" />
                                                                    </div>
                                                                </apex:outputText>
                                                            </apex:outputtext>
                                                        </td>
                                                    </tr>
                                                    <apex:variable var="noOfSuppliableRows" value="{!IF(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', noOfSuppliableRows + 1, noOfSuppliableRows)}" />
                                                    <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                    <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative}">
                                                        <tr class="optionalRow">
                                                            <td class="alternative"></td>
                                                            <td class="slds-text-body_regular">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}"
                                                                                rendered="{!!isEditable || !isQuotation}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}"
                                                                                rendered="{!isEditable && isQuotation}"
                                                                                styleclass="partNumber" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c}"
                                                                                rendered="{!!isEditable || !isQuotation}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c}"
                                                                                rendered="{!isEditable && isQuotation}"
                                                                                required="true"
                                                                                onchange="updateSpecificOrderLine('{!originalOrderLineId}');" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-truncate">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Description__c}"
                                                                                rendered="{!!isEditable || !isQuotation}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Description__c}"
                                                                                rendered="{!isEditable && isQuotation}"
                                                                                styleclass="description" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-truncate">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Manufacturer__c}"
                                                                                rendered="{!!isEditable || !isQuotation}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Manufacturer__c}"
                                                                                rendered="{!isEditable && isQuotation}"
                                                                                styleclass="manufacturer"
                                                                                onchange="updateSpecificOrderLine('{!originalOrderLineId}');" />
                                                            </td>
                                                            <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}" rendered="{!!isEditable || !isQuotation}" />
                                                                    <apex:selectList styleClass="OLFamily" value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}" size="1" rendered="{!isEditable && isQuotation && mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c=='A'}"> 
                                                                        <apex:selectOptions value="{!mapIdOrderLineWrapper[originalOrderLineId].oLFamily}"/> 
                                                                    </apex:selectList>
                                                                    <apex:selectList styleClass="OLFamily" value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}" size="1" onChange="updateFamilyBrandOptions('{!originalOrderLineId}',this.value);" rendered="{!isEditable && isQuotation && mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c!='A'}"> 
                                                                        <apex:selectOptions value="{!mapIdOrderLineWrapper[originalOrderLineId].oLFamily}"/> 
                                                                    </apex:selectList>
                                                                </td>
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BrandOfSparePart__c}" rendered="{!!isEditable || !isQuotation || mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c=='A'}"/>
                                                                    <apex:selectList styleClass="OLBrand" value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BrandOfSparePart__c}" size="1" rendered="{!isEditable && isQuotation && mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c!='A'}"> 
                                                                        <apex:selectOptions value="{!mapIdOrderLineWrapper[originalOrderLineId].oLBrand}"/>
                                                                    </apex:selectList>
                                                                </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.ExpectedDeliveryDuration__c}"
                                                                                rendered="{!  !isEditable ||
                                                                                                (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.ExpectedDeliveryDuration__c}"
                                                                                rendered="{!   (isEditable &&
                                                                                                (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered)))}" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CataloguePrice__c}"
                                                                                styleclass="unitPrice cataloguePrice_{!rowNumber} cataloguePrice"
                                                                                rendered="{! !isEditable ||
                                                                                                (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CataloguePrice__c}"
                                                                                rendered="{!   (isEditable &&
                                                                                                (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered)))}"
                                                                                styleclass="unitPrice cataloguePrice_{!rowNumber}"
                                                                                onchange="calculateTotalForARow({!rowNumber});"
                                                                                onfocus="return numerizeIt(this, '{!decimalSeparator}');" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Quantity__c}"
                                                                                styleclass="quantity quantity_{!rowNumber}"
                                                                                rendered="{!!isEditable || !isQuotation}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Quantity__c}"
                                                                                rendered="{!isEditable && isQuotation}"
                                                                                styleclass="quantity quantity_{!rowNumber}"
                                                                                onchange="calculateTotalForARow({!rowNumber});"
                                                                                onfocus="return numerizeIt(this, '{!decimalSeparator}');" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TotalPrice__c}"
                                                                                styleclass="totalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', 'totalPriceWithoutDiscount', '')}"
                                                                                rendered="{!!isEditable || !isQuotation}" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TotalPrice__c}"
                                                                                styleclass="totalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', 'totalPriceWithoutDiscount', '')}"
                                                                                rendered="{!isEditable && isQuotation}" />
                                                            </td>
                                                            <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Discount__r.DistributorCode__c}"
                                                                                    rendered="{!  !isEditable ||
                                                                                                    (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}" />
                                                                    <apex:selectlist value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Discount__c}"
                                                                                    size="1"
                                                                                    onchange="changeDistributorCode('{!originalOrderLineId}');"
                                                                                    rendered="{!   isEditable &&
                                                                                                    (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered))}">
                                                                        <apex:selectoptions value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLineDistributorCodeOptions}" />
                                                                    </apex:selectlist>
                                                                </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="asDiscount axaDiscount_{!rowNumber}"
                                                                                rendered="{!   !isEditable ||
                                                                                                hasDiscountManagement ||
                                                                                                (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage"
                                                                                    rendered="{!   !isEditable ||
                                                                                                hasDiscountManagement ||
                                                                                                (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}"
                                                                                rendered="{!   isEditable &&
                                                                                                !hasDiscountManagement &&
                                                                                                (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered))}"
                                                                                styleclass="asDiscount axaDiscount_{!rowNumber} initialiseClear"
                                                                                onchange="copyASDiscountToBodyShopDiscount({!rowNumber});calculateTotalForARow({!rowNumber});"
                                                                                onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                            </td>
                                                            <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="rebate rebate_{!rowNumber}"
                                                                                    rendered="{!    !isEditable ||
                                                                                                    hasDiscountManagement ||
                                                                                                    (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage"
                                                                                    rendered="{!    !isEditable ||
                                                                                                    hasDiscountManagement ||
                                                                                                    (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}" />
                                                                    <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    rendered="{!    isEditable &&
                                                                                                    !hasDiscountManagement &&
                                                                                                    (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered))}"
                                                                                    styleclass="rebate rebate_{!rowNumber} initialiseClear"
                                                                                    onchange="calculateTotalForARow({!rowNumber});"
                                                                                    onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                                </td>
                                                            </apex:outputText>
                                                            
                                                            <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="bodyShopDiscount_{!rowNumber}"
                                                                                    rendered="{! !isEditable || mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice ||
                                                                                                    (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    styleClass="bodyShopDiscount_{!rowNumber} percentage"
                                                                                    rendered="{! !isEditable || mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice ||
                                                                                                    (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}" />
                                                                    <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    rendered="{!   isEditable && !mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice &&
                                                                                                    (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered))}"
                                                                                    styleclass="bsDiscount bodyShopDiscount_{!rowNumber} initialiseClear"
                                                                                    onchange="calculateTotalForARow({!rowNumber});"
                                                                                    onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="extraAS extraAS_{!rowNumber}"
                                                                                    rendered="{!   !isEditable ||
                                                                                                    (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage"
                                                                                    rendered="{!   !isEditable ||
                                                                                                    (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}" />
                                                                
                                                                    
                                                                    <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    rendered="{!   isEditable &&
                                                                                                    (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered))}"
                                                                                    styleclass="extraAS extraAS_{!rowNumber} initialiseClearNegative"
                                                                                    onchange="calculateTotalForARow({!rowNumber});"
                                                                                    onfocus="return numerizeItWithNegative(this, '{!decimalSeparator}');" />
                                                                    </td>
                                                                </apex:outputtext>
                                                            
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleclass="extraAS_{!rowNumber}"
                                                                                    style="display:none;" />
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    styleclass="bodyShopDiscount_{!rowNumber}"
                                                                                    style="display:none;" />
                                                                </apex:outputtext>
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}"
                                                                                styleclass="addDiscount_{!rowNumber}"
                                                                                style="display:none;" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}"
                                                                                styleclass="addDiscountAmount_{!rowNumber}"
                                                                                style="display:none;" />
                                                               <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                styleclass="rebate_{!rowNumber}"
                                                                                style="display:none;"
                                                                                rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                            (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyshopTotalPrice__c}"
                                                                                styleclass="bsTotalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', 'bsGrandTotal', '')}"
                                                                                style="display:none;" />
                                                                <div class="asPriceContainer">
                                                                    <div class="totalPriceContainer">
                                                                        <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXATotalPrice__c}"
                                                                                        styleclass="axaTotalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', 'axaGrandTotal', '')}" />
                                                                    </div>
                                                                    <div class="iconContainer">
                                                                        <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                            <div class="popOverParent">
                                                                                <span class="slds-icon_container svgAddDiscount">
                                                                                </span>
                                                                                <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                    role="tooltip">
                                                                                    <div class="slds-popover__body">
                                                                                        {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}" />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </apex:outputpanel>
                                                                        <apex:outputpanel rendered="{!  mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                                        mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != null &&
                                                                                                        mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != 0}">
                                                                            <div class="popOverParent">
                                                                                <span class="slds-icon_container svgAddDiscount">
                                                                                </span>
                                                                                <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                    role="tooltip">
                                                                                    <div class="slds-popover__body">
                                                                                        {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}" />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </apex:outputpanel>
                                                                    </div>
                                                                    <apex:outputtext rendered="{!hasDiscountManagement && isQuotation}">
                                                                        <div class="iconContainer">
                                                                            <span class="slds-icon_container slds-icon-standard-flow"
                                                                                title="{!$Label.RemoveOrderLine}">
                                                                                <apex:commandlink action="{!removeCurrentLine}"
                                                                                                rendered="{!isEditable}"
                                                                                                styleclass="svgRemove"
                                                                                                rerender="frm"
                                                                                                status="statusSpinner">
                                                                                    <apex:param name="wrapperId"
                                                                                                value="{!originalOrderLineId}"
                                                                                                assignto="{!wrapperId}" />
                                                                                </apex:commandlink>
                                                                            </span>
                                                                        </div>
                                                                    </apex:outputtext>
                                                                </div>
                                                            </td>
                                                            <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext rendered="{!isQuotation}">
                                                                        <span class="slds-icon_container slds-icon-standard-flow"
                                                                            title="{!$Label.RemoveOrderLine}"
                                                                            style="float:right;">
                                                                            <apex:commandlink action="{!removeCurrentLine}"
                                                                                            rendered="{!isEditable}"
                                                                                            styleclass="svgRemove"
                                                                                            rerender="frm"
                                                                                            status="statusSpinner">
                                                                                <apex:param name="wrapperId"
                                                                                            value="{!originalOrderLineId}"
                                                                                            assignto="{!wrapperId}" />
                                                                            </apex:commandlink>
                                                                        </span>
                                                                    </apex:outputtext>
                                                                    <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartList__r.Compliance__c}"
                                                                                    style="{!IF(isEditable && isQuotation, 'margin-left:18px;','')}">
                                                                        <span class="slds-icon_container svgCompliance">
                                                                        </span>
                                                                    </apex:outputpanel>
                                                                </td>
                                                            </apex:outputtext>
                                                            <td style="display:none;" />
                                                        </tr>
                                                        <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                    </apex:outputtext>
                                                    <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isBundle}">
                                                        <apex:variable var="bundleIndex" value="{!0}" />
                                                        <apex:repeat var="bundleOrderLine" value="{!mapIdOrderLineWrapper[originalOrderLineId].bundleItemList}">
                                                            <tr class="optionalRow">
                                                                <td class="bundle"></td>
                                                                <td class="slds-text-body_regular">
                                                                    <apex:outputfield value="{!bundleOrderLine.bundleItem.PartNumber__c}"
                                                                                    rendered="{!!isEditable || !isQuotation}" />
                                                                    <apex:inputfield value="{!bundleOrderLine.bundleItem.PartNumber__c}"
                                                                                    rendered="{!isEditable && isQuotation}"
                                                                                    styleclass="partNumber" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!bundleOrderLine.bundleItem.Type__c}"
                                                                                    rendered="{!!isEditable || !isQuotation}" />
                                                                    <apex:inputfield value="{!bundleOrderLine.bundleItem.Type__c}"
                                                                                    rendered="{!isEditable && isQuotation}"
                                                                                    required="true"
                                                                                    onchange="updateSpecificOrderLine('{!originalOrderLineId}', {!bundleIndex});" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!bundleOrderLine.bundleItem.Description__c}"
                                                                                    rendered="{!!isEditable || !isQuotation}" />
                                                                    <apex:inputfield value="{!bundleOrderLine.bundleItem.Description__c}"
                                                                                    rendered="{!isEditable && isQuotation}"
                                                                                    styleclass="description" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!bundleOrderLine.bundleItem.Manufacturer__c}"
                                                                                    rendered="{!!isEditable || !isQuotation}" />
                                                                    <apex:inputfield value="{!bundleOrderLine.bundleItem.Manufacturer__c}"
                                                                                    rendered="{!isEditable && isQuotation}"
                                                                                    styleclass="manufacturer"
                                                                                    onchange="updateSpecificOrderLine('{!originalOrderLineId}', {!bundleIndex});" />
                                                                </td>
                                                                <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!bundleOrderLine.bundleItem.FamilyOfSparePart__c}" rendered="{!!isEditable || !isQuotation}" />
                                                                    <apex:selectList styleClass="OLFamily" value="{!bundleOrderLine.bundleItem.FamilyOfSparePart__c}" size="1" rendered="{!isEditable && isQuotation && bundleOrderLine.bundleItem.Type__c=='A'}"> 
                                                                        <apex:selectOptions value="{!bundleOrderLine.oLFamily}"/> 
                                                                    </apex:selectList>
                                                                    <apex:selectList styleClass="OLFamily" value="{!bundleOrderLine.bundleItem.FamilyOfSparePart__c}" size="1" onChange="updateSpecificOrderLineBundleFB('{!originalOrderLineId}',{!bundleIndex},this.value);" rendered="{!isEditable && isQuotation && bundleOrderLine.bundleItem.Type__c!='A'}"> 
                                                                        <apex:selectOptions value="{!bundleOrderLine.oLFamily}"/> 
                                                                    </apex:selectList>
                                                                </td>
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!bundleOrderLine.bundleItem.BrandOfSparePart__c}" rendered="{!!isEditable || !isQuotation || bundleOrderLine.bundleItem.Type__c=='A'}"/>
                                                                    <apex:selectList styleClass="OLBrand" value="{!bundleOrderLine.bundleItem.BrandOfSparePart__c}" size="1" rendered="{!isEditable && isQuotation && bundleOrderLine.bundleItem.Type__c!='A'}"> 
                                                                        <apex:selectOptions value="{!bundleOrderLine.oLBrand}"/>
                                                                    </apex:selectList>
                                                                </td>
                                                                </apex:outputtext>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!bundleOrderLine.bundleItem.ExpectedDeliveryDuration__c}" 
                                                                                    rendered="{! !isEditable ||
                                                                                                    (!isQuotation && (bundleOrderLine.isBundleDelivered || !hasPORectificationRights))}" />
                                                                    <apex:inputfield value="{!bundleOrderLine.bundleItem.ExpectedDeliveryDuration__c}"
                                                                                    rendered="{!(isEditable &&
                                                                                                (isQuotation || (!isQuotation && hasPORectificationRights && !bundleOrderLine.isBundleDelivered)))}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!bundleOrderLine.bundleItem.CataloguePrice__c}"
                                                                                    styleclass="unitPrice cataloguePrice_{!rowNumber} cataloguePrice"
                                                                                    rendered="{! !isEditable ||
                                                                                                    (!isQuotation && (bundleOrderLine.isBundleDelivered || !hasPORectificationRights))}" />
                                                                    <apex:inputfield value="{!bundleOrderLine.bundleItem.CataloguePrice__c}"
                                                                                    rendered="{!(isEditable &&
                                                                                                (isQuotation || (!isQuotation && hasPORectificationRights && !bundleOrderLine.isBundleDelivered)))}"
                                                                                    styleclass="unitPrice cataloguePrice_{!rowNumber}"
                                                                                    onchange="calculateTotalForARow({!rowNumber});"
                                                                                    onfocus="return numerizeIt(this, '{!decimalSeparator}');" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!bundleOrderLine.bundleItem.Quantity__c}"
                                                                                    styleclass="quantity quantity_{!rowNumber}"
                                                                                    rendered="{!!isEditable || !isQuotation}" />
                                                                    <apex:inputfield value="{!bundleOrderLine.bundleItem.Quantity__c}"
                                                                                    rendered="{!isEditable && isQuotation}"
                                                                                    styleclass="quantity quantity_{!rowNumber}"
                                                                                    onchange="calculateTotalForARow({!rowNumber});"
                                                                                    onfocus="return numerizeIt(this, '{!decimalSeparator}');" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!bundleOrderLine.bundleItem.TotalPrice__c}"
                                                                                    styleclass="totalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', 'totalPriceWithoutDiscount', '')}"
                                                                                    rendered="{!!isEditable || !isQuotation}" />
                                                                    <apex:outputtext value="{!bundleOrderLine.bundleItem.TotalPrice__c}"
                                                                                    styleclass="totalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', 'totalPriceWithoutDiscount', '')}"
                                                                                    rendered="{!isEditable && isQuotation}" />
                                                                </td>
                                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.Discount__r.DistributorCode__c}"
                                                                                        rendered="{!  !isEditable ||
                                                                                                        (!isQuotation && (bundleOrderLine.isBundleDelivered || !hasPORectificationRights))}" />
                                                                        <apex:selectlist value="{!bundleOrderLine.bundleItem.Discount__c}"
                                                                                        size="1"
                                                                                        onchange="changeDistributorCode('{!originalOrderLineId}', {!bundleIndex});"
                                                                                        rendered="{!   isEditable &&
                                                                                                        (isQuotation || (!isQuotation && hasPORectificationRights && !bundleOrderLine.isBundleDelivered))}">
                                                                            <apex:selectoptions value="{!bundleOrderLine.distributorCodeOptions}" />
                                                                        </apex:selectlist>
                                                                    </td>
                                                                </apex:outputtext>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="asDiscount axaDiscount_{!rowNumber}"
                                                                                    rendered="{!   !isEditable ||
                                                                                                    hasDiscountManagement ||
                                                                                                    (!isQuotation && (bundleOrderLine.isBundleDelivered || !hasPORectificationRights))}">
                                                                        <apex:param value="{!bundleOrderLine.bundleItem.AXADiscount__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!bundleOrderLine.bundleItem.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage"
                                                                                    rendered="{!   !isEditable ||
                                                                                                    hasDiscountManagement ||
                                                                                                    (!isQuotation && (bundleOrderLine.isBundleDelivered || !hasPORectificationRights))}" />
                                                                    <apex:inputfield value="{!bundleOrderLine.bundleItem.AXADiscount__c}"
                                                                                    rendered="{!   isEditable &&
                                                                                                    !hasDiscountManagement &&
                                                                                                    (isQuotation || (!isQuotation && hasPORectificationRights && !bundleOrderLine.isBundleDelivered))}"
                                                                                    styleclass="asDiscount axaDiscount_{!rowNumber} initialiseClear"
                                                                                    onchange="copyASDiscountToBodyShopDiscount({!rowNumber});calculateTotalForARow({!rowNumber});"
                                                                                    onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                                </td>
                                                                <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="rebate rebate_{!rowNumber}"
                                                                                        rendered="{!    !isEditable ||
                                                                                                        hasDiscountManagement ||
                                                                                                        (!isQuotation && (bundleOrderLine.isBundleDelivered || !hasPORectificationRights))}">
                                                                            <apex:param value="{!bundleOrderLine.bundleItem.Rebate__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!bundleOrderLine.bundleItem.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage"
                                                                                    rendered="{!    !isEditable ||
                                                                                                        hasDiscountManagement ||
                                                                                                        (!isQuotation && (bundleOrderLine.isBundleDelivered || !hasPORectificationRights))}" />
                                                                        <apex:inputfield value="{!bundleOrderLine.bundleItem.Rebate__c}"
                                                                                        rendered="{!    isEditable &&
                                                                                                        !hasDiscountManagement &&
                                                                                                        (isQuotation || (!isQuotation && hasPORectificationRights && !bundleOrderLine.isBundleDelivered))}"
                                                                                        styleclass="rebate rebate_{!rowNumber} initialiseClear"
                                                                                        onchange="calculateTotalForARow({!rowNumber});"
                                                                                        onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                                    </td>
                                                                </apex:outputText>
                                                                
                                                                <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="bodyShopDiscount_{!rowNumber}"
                                                                                        rendered="{! !isEditable ||
                                                                                                        (!isQuotation && (bundleOrderLine.isBundleDelivered || !hasPORectificationRights))}">
                                                                            <apex:param value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}"
                                                                                    styleClass="bodyShopDiscount_{!rowNumber} percentage"
                                                                                    rendered="{! !isEditable ||
                                                                                                        (!isQuotation && (bundleOrderLine.isBundleDelivered || !hasPORectificationRights))}" />
                                                                        <apex:inputfield value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}"
                                                                                        rendered="{!   isEditable &&
                                                                                                        (isQuotation || (!isQuotation && hasPORectificationRights && !bundleOrderLine.isBundleDelivered))}"
                                                                                        styleclass="bsDiscount bodyShopDiscount_{!rowNumber} initialiseClear"
                                                                                        onchange="calculateTotalForARow({!rowNumber});"
                                                                                        onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                                        </td>
                                                                    </apex:outputtext>
                                                                    <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="extraAS extraAS_{!rowNumber}"
                                                                                        rendered="{!   !isEditable ||
                                                                                                        (!isQuotation && (bundleOrderLine.isBundleDelivered || !hasPORectificationRights))}">
                                                                            <apex:param value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage"
                                                                                    rendered="{!   !isEditable ||
                                                                                                        (!isQuotation && (bundleOrderLine.isBundleDelivered || !hasPORectificationRights))}" />
                                                                        
                                                                        <apex:inputfield value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}"
                                                                                        rendered="{!   isEditable &&
                                                                                                        (isQuotation || (!isQuotation && hasPORectificationRights && !bundleOrderLine.isBundleDelivered))}"
                                                                                        styleclass="extraAS extraAS_{!rowNumber} initialiseClearNegative"
                                                                                        onchange="calculateTotalForARow({!rowNumber});"
                                                                                        onfocus="return numerizeItWithNegative(this, '{!decimalSeparator}');" />
                                                                        </td>
                                                                    </apex:outputtext>
                                                                
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}"
                                                                                        styleclass="extraAS_{!rowNumber}"
                                                                                        style="display:none;" />
                                                                    </apex:outputtext>
                                                                    <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}"
                                                                                        styleclass="bodyShopDiscount_{!rowNumber}"
                                                                                        style="display:none;" />
                                                                    </apex:outputtext>
                                                                    <apex:outputtext value="{!bundleOrderLine.bundleItem.AdditionnalDiscount__c}"
                                                                                    styleclass="addDiscount_{!rowNumber}"
                                                                                    style="display:none;" />
                                                                    <apex:outputtext value="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c}"
                                                                                    styleclass="addDiscountAmount_{!rowNumber}"
                                                                                    style="display:none;" />
                                                                    <apex:outputtext value="{!bundleOrderLine.bundleItem.Rebate__c}"
                                                                                    styleclass="rebate_{!rowNumber}"
                                                                                    style="display:none;"
                                                                                    rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                                (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                    <apex:outputtext value="{!bundleOrderLine.bundleItem.BodyshopTotalPrice__c}"
                                                                                    styleclass="bsTotalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', 'bsGrandTotal', '')}"
                                                                                    style="display:none;" />
                                                                    <div class="asPriceContainer">
                                                                        <div class="totalPriceContainer">
                                                                            <apex:outputtext value="{!bundleOrderLine.bundleItem.AXATotalPrice__c}"
                                                                                            styleclass="axaTotalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c == 'YES', 'axaGrandTotal', '')}" />
                                                                        </div>

                                                                        <div class="iconContainer">
                                                                            <apex:outputpanel rendered="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c != null}">
                                                                                <div class="popOverParent">
                                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                                    </span>
                                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                        role="tooltip">
                                                                                        <div class="slds-popover__body">
                                                                                            {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                            <apex:outputfield value="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c}" />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputpanel>
                                                                            <apex:outputpanel rendered="{!  bundleOrderLine.bundleItem.AdditionalDiscountAmount__c == null &&
                                                                                                            bundleOrderLine.bundleItem.AdditionnalDiscount__c != null &&
                                                                                                            bundleOrderLine.bundleItem.AdditionnalDiscount__c != 0}">

                                                                                <div class="popOverParent">
                                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                                    </span>
                                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                        role="tooltip">
                                                                                        <div class="slds-popover__body">
                                                                                            {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                            <apex:outputfield value="{!bundleOrderLine.bundleItem.AdditionnalDiscount__c}" />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputpanel>
                                                                        </div>
                                                                        <apex:outputtext rendered="{!hasDiscountManagement && isQuotation}">
                                                                            <div class="iconContainer">
                                                                                <span class="slds-icon_container slds-icon-standard-flow"
                                                                                    title="{!$Label.RemoveOrderLine}">
                                                                                    <apex:commandlink action="{!removeCurrentLine}"
                                                                                                    rendered="{!isEditable}"
                                                                                                    styleclass="svgRemove"
                                                                                                    rerender="frm"
                                                                                                    status="statusSpinner">
                                                                                        <apex:param name="wrapperId"
                                                                                                    value="{!originalOrderLineId}"
                                                                                                    assignto="{!wrapperId}" />
                                                                                        <apex:param name="bundleIndex"
                                                                                                    value="{!bundleIndex}"
                                                                                                    assignto="{!bundleItemIndexToRemove}" />
                                                                                    </apex:commandlink>
                                                                                </span>
                                                                            </div>
                                                                        </apex:outputtext>
                                                                    </div>
                                                                </td>
                                                                <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">

                                                                        <apex:outputtext rendered="{!isQuotation}">
                                                                            <span class="slds-icon_container slds-icon-standard-flow"
                                                                                title="{!$Label.RemoveOrderLine}"
                                                                                style="float:right;">
                                                                                <apex:commandlink action="{!removeCurrentLine}"
                                                                                                rendered="{!isEditable}"
                                                                                                styleclass="svgRemove"
                                                                                                rerender="frm"
                                                                                                status="statusSpinner">
                                                                                    <apex:param name="wrapperId"
                                                                                                value="{!originalOrderLineId}"
                                                                                                assignto="{!wrapperId}" />
                                                                                    <apex:param name="bundleIndex"
                                                                                                value="{!bundleIndex}"
                                                                                                assignto="{!bundleItemIndexToRemove}" />
                                                                                </apex:commandlink>
                                                                            </span>
                                                                        </apex:outputtext>
                                                                        <apex:outputpanel rendered="{!!bundleOrderLine.bundleItem.PartList__r.Compliance__c}"
                                                                                        style="{!IF(isEditable && isQuotation, 'margin-left:18px;','')}">
                                                                            <span class="slds-icon_container svgCompliance">
                                                                            </span>
                                                                        </apex:outputpanel>
                                                                    </td>
                                                                </apex:outputtext>
                                                                <td style="display:none;" />
                                                            </tr>
                                                            <apex:variable var="bundleIndex" value="{!bundleIndex + 1}" />
                                                            <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                        </apex:repeat>
                                                    </apex:outputtext>
                                                </apex:outputtext>
                                                <apex:outputtext rendered="{!(((mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginal &&
                                                                                (
                                                                                    (isQuotation &&
                                                                                    mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c != 'NO') 
                                                                                    ||
                                                                                    (!isQuotation &&
                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isSuppliedByAS)
                                                                                ) &&
                                                                                mapIdOrderLineWrapper[originalOrderLineId].isPreselectedForOrder == hasPreselectedParts)) ||
                                                                                (originalOrderLineId == null))
                                                                            }">
                                                    <!--<apex:variable var="numberOfWrapperInSuppliedByAS" value="{!numberOfWrapperInSuppliedByAS + 1}" />-->
                                                    <tr>
                                                        <!-- <td colspan="2" class="slds-text-body_regular">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}</td> -->
                                                        <!-- DUN 14/02/2018 C-002313 - Button to add new orderline -->
                                                        <td colspan="2" class="slds-text-body_regular">
                                                            {!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}
                                                            <!-- <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}"
                                                                            rendered="{!!isEditable ||
                                                                                        ( 
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginal &&
                                                                                            originalOrderLineId != null
                                                                                        )}" />

                                                            <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}"
                                                                            rendered="{!isEditable &&
                                                                                        (
                                                                                            originalOrderLineId == null
                                                                                        )}" /> -->
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            {!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c}
                                                            <!-- <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c}"
                                                                            rendered="{!!isEditable ||
                                                                                        ( 
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginal &&
                                                                                            originalOrderLineId != null
                                                                                        )}" />

                                                            <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c}"
                                                                            rendered="{!isEditable &&
                                                                                        (
                                                                                            originalOrderLineId == null
                                                                                        )}" /> -->

                                                        </td>
                                                        <td class="slds-text-body_regular slds-truncate">
                                                            {!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Description__c}
                                                            <!-- <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Description__c}"
                                                                            rendered="{!!isEditable ||
                                                                                        ( 
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginal &&
                                                                                            originalOrderLineId != null
                                                                                        )}" />

                                                            <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Description__c}"
                                                                            rendered="{!isEditable &&
                                                                                        (
                                                                                            originalOrderLineId == null
                                                                                        )}" /> -->
                                                        </td>
                                                        <td class="slds-text-body_regular slds-truncate">
                                                            {!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Manufacturer__c}
                                                            <!-- <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Manufacturer__c}"
                                                                            rendered="{!!isEditable ||
                                                                                        ( 
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginal &&
                                                                                            originalOrderLineId != null
                                                                                        )}" />

                                                            <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Manufacturer__c}"
                                                                            rendered="{!isEditable &&
                                                                                        (
                                                                                            originalOrderLineId == null
                                                                                        )}" /> -->
                                                        </td>
                                                        <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                            <td class="slds-text-body_regular slds-truncate">
                                                                <!-- RRJ 25/10/2022 C-004824 : Manufacturer ("Marca") should be introduced for each line of paint/annexes products -->
                                                                <apex:outputtext rendered="{!PurchaseOrder__c.TECH_BodyshopCountryCode__c != null && PurchaseOrder__c.TECH_BodyshopCountryCode__c == 'ES'}">
                                                                     <apex:repeat var="KeyId" value="{!mapManufRef}"> 
                                                                        <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNUmber__c == KeyId && mapManufRef[KeyId].RecordType.Name == 'Store Item'}">
                                                                            {!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}
                                                                        </apex:outputtext>
                                                                    </apex:repeat>
                                                                </apex:outputtext>
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}" rendered="{!!isEditable || !isQuotation}" />
                                                                <apex:selectList styleClass="OLFamily" value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}" size="1" rendered="{!isEditable && isQuotation && (!ISBLANK(mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c) && mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c=='A')}"> 
                                                                    <apex:selectOptions value="{!mapIdOrderLineWrapper[originalOrderLineId].oLFamily}"/> 
                                                                </apex:selectList>
                                                                <apex:selectList styleClass="OLFamily" value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}" size="1" onChange="updateFamilyBrandOptions('{!originalOrderLineId}',this.value);" rendered="{!isEditable && isQuotation && !(!ISBLANK(mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c) && mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c=='A')}"> 
                                                                    <apex:selectOptions value="{!mapIdOrderLineWrapper[originalOrderLineId].oLFamily}"/> 
                                                                </apex:selectList>
                                                            </td>
                                                            <td class="slds-text-body_regular slds-truncate">
                                                                <!-- RRJ 25/10/2022 C-004824 : Manufacturer ("Marca") should be introduced for each line of paint/annexes products -->
                                                                <apex:outputtext rendered="{!PurchaseOrder__c.TECH_BodyshopCountryCode__c != null && PurchaseOrder__c.TECH_BodyshopCountryCode__c == 'ES'}">
                                                                    <apex:repeat var="KeyId" value="{!mapManufRef}">
                                                                        <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNUmber__c == KeyId && mapManufRef[KeyId].RecordType.Name == 'Store Item'}">
                                                                            {!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BrandOfSparePart__c}
                                                                        </apex:outputtext>
                                                                    </apex:repeat>
                                                                </apex:outputtext>
                                                                
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BrandOfSparePart__c}" rendered="{!(!isEditable || !isQuotation)}"/>
                                                                <apex:selectList styleClass="OLBrand" value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BrandOfSparePart__c}" size="1" rendered="{!isEditable && isQuotation && !(!ISBLANK(mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c) && mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c=='A')}"> 
                                                                    <apex:selectOptions value="{!mapIdOrderLineWrapper[originalOrderLineId].oLBrand}"/>
                                                                </apex:selectList>
                                                            </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.ExpectedDeliveryDuration__c}"
                                                                            rendered="{! !isEditable ||
                                                                                        (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered || !hasPORectificationRights))}" />
                                                            <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.ExpectedDeliveryDuration__c}"
                                                                            rendered="{!(isEditable &&
                                                                                        (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered)))}" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CataloguePrice__c}"
                                                                            styleclass="unitPrice cataloguePrice_{!rowNumber} cataloguePrice"
                                                                            rendered="{! !isEditable ||
                                                                                        (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered || !hasPORectificationRights))}" />
                                                            <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CataloguePrice__c}"
                                                                            rendered="{!(isEditable &&
                                                                                        (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered)))}"
                                                                            styleclass="unitPrice cataloguePrice_{!rowNumber}"
                                                                            onchange="calculateTotalForARow({!rowNumber});"
                                                                            onfocus="return numerizeIt(this, '{!decimalSeparator}');" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Quantity__c}"
                                                                            styleclass="quantity_{!rowNumber}"
                                                                            rendered="{!!isEditable || !isQuotation}" />
                                                            <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Quantity__c}"
                                                                            rendered="{!isEditable && isQuotation}"
                                                                            styleclass="quantity quantity_{!rowNumber}"
                                                                            onchange="calculateTotalForARow({!rowNumber});"
                                                                            onfocus="return numerizeIt(this, '{!decimalSeparator}');" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TotalPrice__c}"
                                                                            styleclass="totalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c == 'YES', 'totalPriceWithoutDiscount', '')}"
                                                                            rendered="{!!isEditable || !isQuotation}" />
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TotalPrice__c}"
                                                                            styleclass="totalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c == 'YES', 'totalPriceWithoutDiscount', '')}"
                                                                            rendered="{!isEditable && isQuotation}" />
                                                        </td>
                                                        <apex:outputtext rendered="{!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Discount__r.DistributorCode__c}"
                                                                                rendered="{!  !isEditable ||
                                                                                                (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}" />
                                                                <apex:selectlist value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Discount__c}"
                                                                                size="1"
                                                                                onchange="changeDistributorCode('{!originalOrderLineId}');"
                                                                                rendered="{!   isEditable &&
                                                                                                (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered))}">
                                                                    <apex:selectoptions value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLineDistributorCodeOptions}" />
                                                                </apex:selectlist>
                                                            </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                            styleclass="asDiscount axaDiscount_{!rowNumber}"
                                                                            rendered="{! !isEditable ||
                                                                                            hasDiscountManagement ||
                                                                                        (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered || !hasPORectificationRights))}">
                                                                <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}" />
                                                            </apex:outputtext>-->
                                                            <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage"
                                                                                    rendered="{! !isEditable ||
                                                                                            hasDiscountManagement ||
                                                                                        (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered || !hasPORectificationRights))}" />
                                                            <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}"
                                                                            rendered="{!isEditable &&
                                                                                        !hasDiscountManagement &&
                                                                                        (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered))}"
                                                                            styleclass="asDiscount axaDiscount_{!rowNumber} initialiseClear"
                                                                            onchange="copyASDiscountToBodyShopDiscount({!rowNumber});calculateTotalForARow({!rowNumber});"
                                                                            onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                        </td>
                                                        <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="rebate rebate_{!rowNumber}"
                                                                                rendered="{! !isEditable ||
                                                                                                hasDiscountManagement ||
                                                                                            (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered || !hasPORectificationRights))}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage"
                                                                                    rendered="{! !isEditable ||
                                                                                                hasDiscountManagement ||
                                                                                            (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered || !hasPORectificationRights))}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                rendered="{!isEditable &&
                                                                                            !hasDiscountManagement &&
                                                                                            (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered))}"
                                                                                styleclass="rebate rebate_{!rowNumber} initialiseClear"
                                                                                onchange="calculateTotalForARow({!rowNumber});"
                                                                                onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />
                                                            </td>
                                                        </apex:outputText>
                                                        

                                                        <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="bodyShopDiscount_{!rowNumber}"
                                                                                rendered="{! !isEditable || mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice ||
                                                                                        (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered || !hasPORectificationRights))}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    styleClass="bodyShopDiscount_{!rowNumber} percentage"
                                                                                    rendered="{! !isEditable || mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice ||
                                                                                        (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered || !hasPORectificationRights))}" />
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                rendered="{!isEditable && !mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice &&
                                                                                            (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered))}"
                                                                                styleclass="bsDiscount bodyShopDiscount_{!rowNumber} initialiseClear"
                                                                                onchange="calculateTotalForARow({!rowNumber});"
                                                                                onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />

                                                                <!--<apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                rendered="{!isEditable &&
                                                                                            (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginalDelivered))}"
                                                                                styleclass="bsDiscount bodyShopDiscount_{!rowNumber} initialiseClear"
                                                                                onchange="calculateTotalForARow({!rowNumber});"
                                                                                onfocus="return numerizeItWithClearInput(this, '{!decimalSeparator}');" />-->
                                                                </td>
                                                            </apex:outputtext>
                                                            <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="extraAS extraAS_{!rowNumber}"
                                                                                rendered="{!   !isEditable ||
                                                                                                (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage"
                                                                                    rendered="{!   !isEditable ||
                                                                                                (!isQuotation && (mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered || !hasPORectificationRights))}" />
                                                                
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                rendered="{!   isEditable &&
                                                                                                (isQuotation || (!isQuotation && hasPORectificationRights && !mapIdOrderLineWrapper[originalOrderLineId].isFinalAlternativeDelivered))}"
                                                                                styleclass="extraAS extraAS_{!rowNumber} initialiseClearNegative"
                                                                                onchange="calculateTotalForARow({!rowNumber});"
                                                                                onfocus="return numerizeItWithNegative(this, '{!decimalSeparator}');" />
                                                                </td>
                                                            </apex:outputtext>
                                                        
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                styleclass="extraAS_{!rowNumber}"
                                                                                style="display:none;" />
                                                            </apex:outputtext>
                                                            <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                styleclass="bodyShopDiscount_{!rowNumber}"
                                                                                style="display:none;" />
                                                            </apex:outputtext>
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}"
                                                                            styleclass="addDiscount_{!rowNumber}"
                                                                            style="display:none;" />
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}"
                                                                            styleclass="addDiscountAmount_{!rowNumber}"
                                                                            style="display:none;" />
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                            styleclass="rebate_{!rowNumber}"
                                                                            style="display:none;"
                                                                            rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                        (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                            <!-- WCH 11/06/2020 C-003762 -->
                                                            <!-- <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyshopTotalPrice__c}"
                                                                            styleclass="bsTotalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c == 'YES', 'bsGrandTotal', '')}"
                                                                            style="display:none;" /> -->
                                                            <!-- WCH 11/06/2020 C-003762 -->
                                                            <apex:outputtext value="{0, number, ###,###0.000}" styleclass="{!IF(mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c == 'YES', 'bsGrandTotal', '')}" style="display:none;">
                                                                            <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyshopTotalPrice__c}"/>
                                                            </apex:outputtext>

                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXATotalPrice__c}"
                                                                            styleclass="axaTotalPrice_{!rowNumber} {!IF(mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c == 'YES', 'axaGrandTotal', '')}" />
                                                            
                                                            <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                <div class="popOverParent">
                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                    </span>
                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                        role="tooltip">
                                                                        <div class="slds-popover__body">
                                                                            {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputpanel>
                                                            <apex:outputpanel rendered="{!  mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != null &&
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != 0}">
                                                                <div class="popOverParent">
                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                    </span>
                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                        role="tooltip">
                                                                        <div class="slds-popover__body">
                                                                            {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputpanel>
                                                        </td>
                                                        <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartList__r.Compliance__c}">
                                                                    <span class="slds-icon_container svgCompliance">
                                                                    </span>
                                                                </apex:outputpanel>
                                                            </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext rendered="{!isQuotation}">
                                                                <apex:outputpanel rendered="{!!isEditable}">
                                                                    <input type="checkbox"
                                                                        class="multi-switch"
                                                                        unchecked-value="NO"
                                                                        checked-value="YES"
                                                                        value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c}"
                                                                        wrapperid="{!originalOrderLineId}"
                                                                        disabled="disabled" />
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!isEditable}">
                                                                    <input type="checkbox"
                                                                        class="multi-switch"
                                                                        unchecked-value="NO"
                                                                        checked-value="YES"
                                                                        value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c}"
                                                                        wrapperid="{!originalOrderLineId}" />
                                                                </apex:outputpanel>
                                                                <span class="slds-icon_container"
                                                                    title="{!$Label.AddOrderLine}">
                                                                    <apex:commandlink action="{!addNewOrderLine}"
                                                                                    rendered="{!isEditable && NOT(mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice)}"
                                                                                    styleclass="svgNew"
                                                                                    rerender="frm"
                                                                                    status="statusSpinner">
                                                                        <apex:param name="wrapperId"
                                                                                    value="{!originalOrderLineId}"
                                                                                    assignto="{!wrapperId}" />
                                                                    </apex:commandlink>
                                                                </span>
                                                            </apex:outputtext>
                                                            <apex:outputtext rendered="{!!isQuotation}">
                                                               <!-- AMI 04/10/18 : C-002045 - color status red if advanced case management is enabled + adding new statuses "managed,cancelled,returned" -->
                                                                <span data-hasError="{!mapIdOrderLineWrapper[originalOrderLineId].isFinalOfferErrored}" style="{!IF(isEditable == true,'display:none','')}" data-statusmanaged="{!mapIdOrderLineWrapper[originalOrderLineId].isManaged}">
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.DeliveryStatus__c}"/>
                                                                </span>
                                                                
                                                                <span data-isErrored="{!mapIdOrderLineWrapper[originalOrderLineId].isFinalOfferErrored}" >
                                                                    <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.DeliveryStatus__c}"
                                                                                rendered="{!isEditable}"/>
                                                                </span>
                                                                
                                                                <apex:outputText rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.DeliveryStatus__c == 'ISSUE' &&
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CancelReason__c != null}">
                                                                    <div>
                                                                        {!$Label.Reason}: &nbsp;
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CancelReason__c}" />
                                                                    </div>
                                                                </apex:outputText>
                                                            </apex:outputtext>
                                                        </td>
                                                    </tr>
                                                    <apex:variable var="noOfSuppliableRows" value="{!IF(mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c == 'YES', noOfSuppliableRows + 1, noOfSuppliableRows)}" />
                                                    <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                </apex:outputtext>
                                            </apex:repeat>
                                        </tbody>
                                        <apex:outputtext rendered="{!noOfSuppliableRows > 0}">
                                            <tfoot>
                                                <tr>
                                                    <td colspan="{!IF(activateFamilyBrand,10,8)}"
                                                        class="slds-text-body_regular slds-text-align_right">
                                                        {!$Label.VFORDERLINEFOOTERAXATOTAL}:
                                                    </td>
                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                        <span id="grandTotalPriceWithoutDiscount"></span>
                                                    </td><!--VSU 05/07/18 Added condition for correct rendering DE-->
                                                    <td colspan="{!IF(currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR',
                                                                IF(!hasDiscountManagement, 3, 4),
                                                                IF(currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'DE',IF(!hasDiscountManagement, 1, 2),IF(!hasDiscountManagement, 2, 3)))}"
                                                        class="slds-text-body_regular slds-text-align_right">
                                                    </td>
                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                        <span id="axaGrandTotalPrice"></span>
                                                    </td>
                                                    <td colspan="2"></td>
                                                </tr>
                                                <apex:outputtext rendered="{!$ObjectType.PurchaseOrder__c.fields.TotalBSAmountDelivered__c.Accessible}">
                                                    <tr><!--VSU 05/07/18 Added condition for correct rendering DE-->
                                                        <td colspan="{!IF(currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR',
                                                                        IF(!hasDiscountManagement, 12, 13),
                                                                        IF(currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'DE',IF(!hasDiscountManagement, 10, 11),IF(!hasDiscountManagement, 11, 12)))}"
                                                            class="slds-text-body_regular slds-text-align_right">{!$ObjectType.PurchaseOrder__c.fields.TotalBSAmountDelivered__c.Label}:</td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <span id="bsGrandTotalPrice"></span>
                                                            <!--<apex:outputtext rendered="{!isQuotation}">
                                                                <span id="bsGrandTotalPrice"></span>
                                                            </apex:outputtext>
                                                            <apex:outputtext rendered="{!!isQuotation}">
                                                                <apex:outputfield value="{!currentPurchaseOrder.TotalBSAmountDelivered__c}" />
                                                            </apex:outputtext>-->
                                                        </td>
                                                        <td colspan="2"></td>
                                                    </tr>
                                                </apex:outputtext>
                                            </tfoot>
                                        </apex:outputtext>
                                    </table>
                                </apex:outputText>


                                <!-- -------------------------------------- NOT SELECTED BY DISTRIBUTOR ---------------------------------------------- -->
                                <apex:outputText rendered="{!numberOfWrapperInNotSelectedByDistributor > 0}">
                                    <div class="slds-card__header slds-grid grid_flex-spread">
                                        <h2 class="slds-text-heading_small slds-truncate">{!$Label.NotSelected}</h2>
                                    </div>
                                    <table class="slds-table slds-table_bordered">
                                        <thead>
                                            <tr>
                                                <td class="slds-text-heading_label" colspan="2">{!$ObjectType.OrderLine__c.fields.PartNumber__c.label}</td>
                                                <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Type__c.label}</td>
                                                <td class="slds-text-heading_label">{!$ObjectType.OrderLine__c.fields.Description__c.label}</td>
                                                <td class="slds-text-heading_label">{!$ObjectType.OrderLine__c.fields.Manufacturer__c.label}</td>
                                                <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                    <td class="slds-text-heading_label">{!$Label.POOL_Family}</td>
                                                    <td class="slds-text-heading_label">{!$Label.POOL_Brand}</td>
                                                </apex:outputtext>
                                                <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDEXPECTDELIVERY}</td>
                                                <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDUNITPRICE}</td>
                                                <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDQUANTITY}</td>
                                                <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDTOTALPRICE}</td>
                                                <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXADISCOUNT}</td>
                                                    <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Rebate__c.label}</td>
                                                    </apex:outputText>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDBSDISCOUNT}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXATOTALPRICE}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDCOMPLIANT}</td>
                                                </apex:outputtext>
                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFDistributorCode}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXADISCOUNT}</td>
                                                    <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Rebate__c.label}</td>
                                                    </apex:outputText>
                                                    <apex:outputtext rendered="{!IF(currentPurchaseOrder.TECH_AssessmentCountryCode__c!='DE',true,false)}">
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFExtraAS}</td>
                                                    </apex:outputtext>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXATOTALPRICE}</td>
                                                </apex:outputtext>
                                                <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDSUPPLIABLE}</td>
                                                <apex:outputtext rendered="{!($ObjectType.OrderLine__c.fields.CancelReason__c.Accessible)}">
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.CancelReason__c.label}</td>
                                                </apex:outputtext>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <apex:repeat var="originalOrderLineId" value="{!mapIdOrderLineWrapper}">
                                                <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine != null &&
                                                                            mapIdOrderLineWrapper[originalOrderLineId].isNotSelectedByDistributor &&
                                                                            mapIdOrderLineWrapper[originalOrderLineId].isPreselectedForOrder == hasPreselectedParts}">
                                                    <!--<apex:variable var="numberOfWrapperInNotSelectedByDistributor" value="{!numberOfWrapperInNotSelectedByDistributor + 1}" />-->
                                                    <tr>
                                                        <td colspan="2" class="slds-text-body_regular">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.PartNumber__c}</td>
                                                        <td class="slds-text-body_regular slds-text-align_center">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c}</td>
                                                        <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Description__c}</td>
                                                        <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Manufacturer__c}</td>
                                                        <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.FamilyOfSparePart__c}</td>
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BrandOfSparePart__c}</td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.ExpectedDeliveryDuration__c}"
                                                                            rendered="{!isQuotation}" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.CataloguePrice__c}"
                                                                            styleclass="cataloguePrice_{!rowNumber} cataloguePrice"
                                                                            rendered="{!isQuotation}" />
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.CataloguePrice__c}"
                                                                            styleclass="cataloguePrice"
                                                                            rendered="{!!isQuotation}" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Quantity__c}"
                                                                            styleclass="quantity_{!rowNumber}"
                                                                            rendered="{!isQuotation}" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TotalPrice__c}"
                                                                            styleclass="totalPrice_{!rowNumber}"
                                                                            rendered="{!isQuotation}" />
                                                        </td>
                                                        <apex:outputtext rendered="{!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Discount__r.DistributorCode__c}"
                                                                                rendered="{!isQuotation}" />
                                                            </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                            styleclass="asDiscount axaDiscount_{!rowNumber}"
                                                                            rendered="{!isQuotation}">
                                                                <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXADiscount__c}" />
                                                            </apex:outputtext>-->
                                                            <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXADiscount__c}"
                                                                                 styleClass="asDiscount axaDiscount_{!rowNumber} percentage"
                                                                                 rendered="{!isQuotation}" />
                                                        </td>
                                                        <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="rebate rebate_{!rowNumber}"
                                                                                rendered="{!isQuotation}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}"
                                                                                 styleClass="rebate rebate_{!rowNumber} percentage"
                                                                                 rendered="{!isQuotation}" />
                                                            </td>
                                                        </apex:outputText>
                                                        
                                                        <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="bsDiscount bodyShopDiscount_{!rowNumber}"
                                                                                rendered="{!isQuotation}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}"
                                                                                 styleClass="bsDiscount bodyShopDiscount_{!rowNumber} percentage"
                                                                                 rendered="{!isQuotation}" />
                                                                </td>
                                                            </apex:outputtext>
                                                            <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="extraAS extraAS_{!rowNumber}"
                                                                                rendered="{!isQuotation}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage"
                                                                                    rendered="{!isQuotation}" />
                                                                </td>
                                                            </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext rendered="{!isQuotation}">
                                                                <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleclass="extraAS_{!rowNumber} slds-hide" />
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}"
                                                                                    styleclass="bodyShopDiscount_{!rowNumber} slds-hide" />
                                                                </apex:outputtext>
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c}"
                                                                                styleclass="addDiscount_{!rowNumber} slds-hide" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c}"
                                                                                styleclass="addDiscountAmount_{!rowNumber} slds-hide" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}"
                                                                                styleclass="rebate_{!rowNumber} slds-hide"
                                                                                rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                            (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXATotalPrice__c}"
                                                                                styleclass="axaTotalPrice_{!rowNumber}" />
                                                                <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                    <div class="popOverParent">
                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                        </span>
                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                            role="tooltip">
                                                                            <div class="slds-popover__body">
                                                                                {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c}" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c != null &&
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c != 0}">
                                                                    <div class="popOverParent">
                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                        </span>
                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                            role="tooltip">
                                                                            <div class="slds-popover__body">
                                                                                {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c}" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                            </apex:outputtext>
                                                        </td>
                                                        <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext rendered="{!isQuotation}">
                                                                    <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.PartList__r.Compliance__c}">
                                                                        <span class="slds-icon_container svgCompliance">
                                                                        </span>
                                                                    </apex:outputpanel>
                                                                </apex:outputtext>
                                                            </td>
                                                        </apex:outputtext>

                                                        <td class="slds-text-body_regular"
                                                            rowspan="{!IF(isQuotation, 1, mapIdOrderLineWrapper[originalOrderLineId].rowSpan)}">
                                                            <apex:outputpanel rendered="{!!isEditable || !isQuotation}">
                                                                <input type="checkbox"
                                                                    class="multi-switch"
                                                                    unchecked-value="NO"
                                                                    checked-value="YES"
                                                                    value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c}"
                                                                    wrapperid="{!originalOrderLineId}"
                                                                    disabled="disabled" />
                                                            </apex:outputpanel>
                                                            <apex:outputpanel rendered="{!isEditable && isQuotation}">
                                                                <input type="checkbox"
                                                                    class="multi-switch"
                                                                    unchecked-value="NO"
                                                                    checked-value="YES"
                                                                    value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Suppliable__c}"
                                                                    wrapperid="{!originalOrderLineId}" />
                                                            </apex:outputpanel>
                                                        </td>

                                                        <apex:outputtext rendered="{!($ObjectType.OrderLine__c.fields.CancelReason__c.Accessible)}">
                                                            <td class="slds-text-body_regular slds-text-align_center"
                                                                rowspan="{!IF(isQuotation, 1, mapIdOrderLineWrapper[originalOrderLineId].rowSpan)}">
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.CancelReason__c}"
                                                                                styleclass="cancelReason"
                                                                                rendered="{!isEditable && isQuotation}" />
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.CancelReason__c}"
                                                                                styleclass="cancelReason"
                                                                                rendered="{!!isEditable || !isQuotation}" />
                                                            </td>
                                                        </apex:outputtext>
                                                    </tr>
                                                    <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                    <apex:outputtext rendered="{!!isQuotation}">
                                                        <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative}">
                                                            <tr class="optionalRow">
                                                                <td class="alternative"></td>
                                                                <td class="slds-text-body_regular">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Description__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Manufacturer__c}" />
                                                                </td>
                                                                <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BrandOfSparePart__c}" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.ExpectedDeliveryDuration__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CataloguePrice__c}"
                                                                                    styleclass="cataloguePrice_{!rowNumber} cataloguePrice" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Quantity__c}"
                                                                                    styleclass="quantity_{!rowNumber}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TotalPrice__c}"
                                                                                    styleclass="totalPrice_{!rowNumber}" />
                                                                </td>
                                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Discount__r.DistributorCode__c}" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="asDiscount axaDiscount_{!rowNumber}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage" />
                                                                </td>
                                                                <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="rebate rebate_{!rowNumber}">
                                                                            <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage"/>
                                                                    </td>
                                                                </apex:outputText>
                                                                
                                                                <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="bsDiscount bodyShopDiscount_{!rowNumber}">
                                                                            <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    styleClass="bsDiscount bodyShopDiscount_{!rowNumber} percentage" />
                                                                        </td>
                                                                    </apex:outputtext>
                                                                    <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="extraAS extraAS_{!rowNumber}">
                                                                            <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage" />
                                                                        </td>
                                                                    </apex:outputtext>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <div class="asPriceContainer">
                                                                        <div class="totalPriceContainer">
                                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXATotalPrice__c}"
                                                                                            styleclass="axaTotalPrice_{!rowNumber}"
                                                                                            rendered="{!!isEditable || !isQuotation}" />
                                                                        </div>
                                                                        <div class="iconContainer">
                                                                            <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                                <div class="popOverParent">
                                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                                    </span>
                                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                        role="tooltip">
                                                                                        <div class="slds-popover__body">
                                                                                            {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}" />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputpanel>
                                                                            <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                                        mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != null &&
                                                                                                        mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != 0}">
                                                                                <div class="popOverParent">
                                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                                    </span>
                                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                        role="tooltip">
                                                                                        <div class="slds-popover__body">
                                                                                            {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}" />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputpanel>
                                                                        </div>
                                                                    </div>
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}"
                                                                                    styleclass="addDiscount_{!rowNumber} slds-hide" />
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}"
                                                                                    styleclass="addDiscountAmount_{!rowNumber} slds-hide" />
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    styleclass="rebate_{!rowNumber} slds-hide"
                                                                                    rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                            (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                    <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                        <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                        styleclass="extraAS_{!rowNumber} slds-hide" />
                                                                    </apex:outputtext>
                                                                    <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                        <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                        styleclass="bodyShopDiscount_{!rowNumber} slds-hide" />
                                                                    </apex:outputtext>
                                                                </td>
                                                                <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartList__r.Compliance__c}">
                                                                            <span class="slds-icon_container svgCompliance">
                                                                            </span>
                                                                        </apex:outputpanel>
                                                                    </td>
                                                                </apex:outputtext>
                                                                <td style="display:none;" />
                                                            </tr>
                                                            <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                        </apex:outputtext>
                                                        <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isBundle}">
                                                            <apex:variable var="bundleIndex" value="{!0}" />
                                                            <apex:repeat var="bundleOrderLine" value="{!mapIdOrderLineWrapper[originalOrderLineId].bundleItemList}">
                                                                <tr class="optionalRow">
                                                                    <td class="bundle"></td>
                                                                    <td class="slds-text-body_regular">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.PartNumber__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.Type__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.Description__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.Manufacturer__c}" />
                                                                    </td>
                                                                    <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                        <td class="slds-text-body_regular slds-truncate">
                                                                            <apex:outputfield value="{!bundleOrderLine.bundleItem.FamilyOfSparePart__c}" />
                                                                        </td>
                                                                        <td class="slds-text-body_regular slds-truncate">
                                                                            <apex:outputfield value="{!bundleOrderLine.bundleItem.BrandOfSparePart__c}" />
                                                                        </td>
                                                                    </apex:outputtext>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.ExpectedDeliveryDuration__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.CataloguePrice__c}"
                                                                                        styleclass="cataloguePrice_{!rowNumber} cataloguePrice" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.Quantity__c}"
                                                                                        styleclass="quantity quantity_{!rowNumber}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.TotalPrice__c}"
                                                                                        styleclass="totalPrice_{!rowNumber}" />
                                                                    </td>
                                                                    <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <apex:outputfield value="{!bundleOrderLine.bundleItem.Discount__r.DistributorCode__c}" />
                                                                        </td>
                                                                    </apex:outputtext>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="asDiscount axaDiscount_{!rowNumber}">
                                                                            <apex:param value="{!bundleOrderLine.bundleItem.AXADiscount__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!bundleOrderLine.bundleItem.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage" />
                                                                    </td>
                                                                    <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                            styleclass="rebate rebate_{!rowNumber}">
                                                                                <apex:param value="{!bundleOrderLine.bundleItem.Rebate__c}" />
                                                                            </apex:outputtext>-->
                                                                            <apex:outputText value="{!bundleOrderLine.bundleItem.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage" />
                                                                        </td>
                                                                    </apex:outputText>
                                                                    
                                                                    <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                            styleclass="bsDiscount bodyShopDiscount_{!rowNumber}">
                                                                                <apex:param value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}" />
                                                                            </apex:outputtext>-->
                                                                            <apex:outputText value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}"
                                                                                    styleClass="bsDiscount bodyShopDiscount_{!rowNumber} percentage" />
                                                                            </td>
                                                                        </apex:outputtext>
                                                                        <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                            styleclass="extraAS extraAS_{!rowNumber}">
                                                                                <apex:param value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}" />
                                                                            </apex:outputtext>-->
                                                                            <apex:outputText value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage" />
                                                                            </td>
                                                                        </apex:outputtext>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <div class="asPriceContainer">
                                                                            <div class="totalPriceContainer">
                                                                                <apex:outputtext value="{!bundleOrderLine.bundleItem.AXATotalPrice__c}"
                                                                                                styleclass="axaTotalPrice_{!rowNumber}" />
                                                                            </div>
                                                                            <div class="iconContainer">
                                                                                <apex:outputpanel rendered="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c != null}">
                                                                                    <div class="popOverParent">
                                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                                        </span>
                                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                            role="tooltip">
                                                                                            <div class="slds-popover__body">
                                                                                                {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                                <apex:outputfield value="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c}" />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </apex:outputpanel>
                                                                                <apex:outputpanel rendered="{!  bundleOrderLine.bundleItem.AdditionalDiscountAmount__c == null &&
                                                                                                                bundleOrderLine.bundleItem.AdditionnalDiscount__c != null &&
                                                                                                                bundleOrderLine.bundleItem.AdditionnalDiscount__c != 0}">
                                                                                    <div class="popOverParent">
                                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                                        </span>
                                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                            role="tooltip">
                                                                                            <div class="slds-popover__body">
                                                                                                {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                                <apex:outputfield value="{!bundleOrderLine.bundleItem.AdditionnalDiscount__c}" />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </apex:outputpanel>
                                                                            </div>
                                                                        </div>
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.AdditionnalDiscount__c}"
                                                                                        styleclass="addDiscount_{!rowNumber} slds-hide" />
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c}"
                                                                                        styleclass="addDiscountAmount_{!rowNumber} slds-hide" />
                                                                       <apex:outputtext value="{!bundleOrderLine.bundleItem.Rebate__c}"
                                                                                        styleclass="rebate_{!rowNumber} slds-hide"
                                                                                        rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                                    (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                        <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                            <apex:outputtext value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}"
                                                                                            styleclass="extraAS_{!rowNumber} slds-hide" />
                                                                        </apex:outputtext>
                                                                        <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                            <apex:outputtext value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}"
                                                                                            styleclass="bodyShopDiscount_{!rowNumber} slds-hide" />
                                                                        </apex:outputtext>
                                                                    </td>
                                                                    <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                    
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <apex:outputpanel rendered="{!!bundleOrderLine.bundleItem.PartList__r.Compliance__c}">
                                                                                <span class="slds-icon_container svgCompliance">
                                                                                </span>
                                                                            </apex:outputpanel>
                                                                        </td>
                                                                    </apex:outputtext>
                                                                    <td style="display:none;" />
                                                                </tr>
                                                                <apex:variable var="bundleIndex" value="{!bundleIndex + 1}" />
                                                                <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                            </apex:repeat>
                                                        </apex:outputtext>
                                                    </apex:outputtext>
                                                </apex:outputtext>
                                                <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginal &&
                                                                            mapIdOrderLineWrapper[originalOrderLineId].isNotSelectedByDistributor &&
                                                                            mapIdOrderLineWrapper[originalOrderLineId].isPreselectedForOrder == hasPreselectedParts}">
                                                    <!--<apex:variable var="numberOfWrapperInNotSelectedByDistributor" value="{!numberOfWrapperInNotSelectedByDistributor + 1}" />-->
                                                    <tr>
                                                        <td colspan="2" class="slds-text-body_regular">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}</td>
                                                        <td class="slds-text-body_regular slds-text-align_center">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c}</td>
                                                        <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Description__c}</td>
                                                        <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Manufacturer__c}</td>
                                                        <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}</td>
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BrandOfSparePart__c}</td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.ExpectedDeliveryDuration__c}" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CataloguePrice__c}"
                                                                            styleclass="cataloguePrice_{!rowNumber} cataloguePrice" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Quantity__c}"
                                                                            styleclass="quantity_{!rowNumber}" />
                                                        </td>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TotalPrice__c}"
                                                                            styleclass="totalPrice_{!rowNumber}" />
                                                        </td>
                                                        <apex:outputtext rendered="{!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Discount__r.DistributorCode__c}" />
                                                            </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                            styleclass="asDiscount axaDiscount_{!rowNumber}">
                                                                <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}" />
                                                            </apex:outputtext>-->
                                                            <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage" />
                                                        </td>
                                                        <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="rebate rebate_{!rowNumber}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}" />
                                                                </apex:outputtext>-->
                                                               <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage" />
                                                            </td>
                                                        </apex:outputText>
                                                        
                                                        <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="bsDiscount bodyShopDiscount_{!rowNumber}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    styleClass="bsDiscount bodyShopDiscount_{!rowNumber} percentage" />
                                                                </td>
                                                        </apex:outputtext>
                                                        <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="extraAS extraAS_{!rowNumber}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage" />
                                                                </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                            <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                styleclass="extraAS_{!rowNumber} slds-hide" />
                                                            </apex:outputtext>
                                                            <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                styleclass="bodyShopDiscount_{!rowNumber} slds-hide" />
                                                            </apex:outputtext>
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}"
                                                                            styleclass="addDiscount_{!rowNumber} slds-hide" />
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}"
                                                                            styleclass="addDiscountAmount_{!rowNumber} slds-hide" />
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                            styleclass="rebate_{!rowNumber} slds-hide"
                                                                            rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                        (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXATotalPrice__c}"
                                                                            styleclass="axaTotalPrice_{!rowNumber}" />
                                                            <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                <div class="popOverParent">
                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                    </span>
                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                        role="tooltip">
                                                                        <div class="slds-popover__body">
                                                                            {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputpanel>
                                                            <apex:outputpanel rendered="{!  mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != null &&
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != 0}">
                                                                <div class="popOverParent">
                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                    </span>
                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                        role="tooltip">
                                                                        <div class="slds-popover__body">
                                                                            {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputpanel>
                                                        </td>
                                                        <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartList__r.Compliance__c}">
                                                                    <span class="slds-icon_container svgCompliance">
                                                                    </span>
                                                                </apex:outputpanel>
                                                            </td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-body_regular"
                                                            rowspan="{!IF(isQuotation, 1, mapIdOrderLineWrapper[originalOrderLineId].rowSpan)}">
                                                            <apex:outputpanel rendered="{!!isEditable || !isQuotation}">
                                                                <input type="checkbox"
                                                                    class="multi-switch"
                                                                    unchecked-value="NO"
                                                                    checked-value="YES"
                                                                    value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c}"
                                                                    wrapperid="{!originalOrderLineId}"
                                                                    disabled="disabled" />
                                                            </apex:outputpanel>
                                                            <apex:outputpanel rendered="{!isEditable && isQuotation}">
                                                                <input type="checkbox"
                                                                    class="multi-switch"
                                                                    unchecked-value="NO"
                                                                    checked-value="YES"
                                                                    value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Suppliable__c}"
                                                                    wrapperid="{!originalOrderLineId}" />
                                                            </apex:outputpanel>
                                                        </td>
                                                        <apex:outputtext rendered="{!($ObjectType.OrderLine__c.fields.CancelReason__c.Accessible)}">
                                                            <td class="slds-text-body_regular slds-text-align_center"
                                                                rowspan="{!IF(isQuotation, 1 ,mapIdOrderLineWrapper[originalOrderLineId].rowSpan)}">
                                                                <apex:inputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CancelReason__c}"
                                                                                styleclass="cancelReason"
                                                                                rendered="{!isEditable && isQuotation}" />
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CancelReason__c}"
                                                                                styleclass="cancelReason"
                                                                                rendered="{!!isEditable || !isQuotation}" />
                                                            </td>
                                                        </apex:outputtext>
                                                    </tr>
                                                    <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                </apex:outputtext>
                                            </apex:repeat>
                                        </tbody>
                                    </table>
                                </apex:outputText>

                                <apex:outputText rendered="{!!isQuotation}">
                                    <!-- -------------------------------------- Canceled By BodyShop ---------------------------------------------- -->
                                    <apex:outputText rendered="{!numberOfWrapperInCanceledByBodyShop > 0}">
                                        <div class="slds-card__header slds-grid grid_flex-spread">
                                            <h2 class="slds-text-heading_small slds-truncate">{!$Label.CanceledByBodyShop}</h2>
                                        </div>
                                        <table class="slds-table slds-table_bordered">
                                            <thead>
                                                <tr>
                                                    <td class="slds-text-heading_label" colspan="2">{!$ObjectType.OrderLine__c.fields.PartNumber__c.label}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Type__c.label}</td>
                                                    <td class="slds-text-heading_label">{!$ObjectType.OrderLine__c.fields.Description__c.label}</td>
                                                    <td class="slds-text-heading_label">{!$ObjectType.OrderLine__c.fields.Manufacturer__c.label}</td>
                                                    <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                        <td class="slds-text-heading_label">{!$Label.POOL_Family}</td>
                                                        <td class="slds-text-heading_label">{!$Label.POOL_Brand}</td>
                                                    </apex:outputtext>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDEXPECTDELIVERY}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDUNITPRICE}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDQUANTITY}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDTOTALPRICE}</td>
                                                    <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXADISCOUNT}</td>
                                                        <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                            <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Rebate__c.label}</td>
                                                        </apex:outputText>
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDBSDISCOUNT}</td>
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXATOTALPRICE}</td>
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDCOMPLIANT}</td>
                                                    </apex:outputtext>
                                                    <apex:outputtext rendered="{!hasDiscountManagement}">
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFDistributorCode}</td>
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXADISCOUNT}</td>
                                                        <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                            <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Rebate__c.label}</td>
                                                        </apex:outputText>
                                                        <apex:outputtext rendered="{!IF(currentPurchaseOrder.TECH_AssessmentCountryCode__c!='DE',true,false)}">
                                                            <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFExtraAS}</td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXATOTALPRICE}</td>
                                                    </apex:outputtext>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDDELIVERY}</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <apex:repeat var="originalOrderLineId" value="{!mapIdOrderLineWrapper}">
                                                    <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine != null &&
                                                                                mapIdOrderLineWrapper[originalOrderLineId].isCanceledByBodyshop &&
                                                                            mapIdOrderLineWrapper[originalOrderLineId].isPreselectedForOrder == hasPreselectedParts}">
                                                        <!--<apex:variable var="numberOfWrapperInCanceledByBodyShop" value="{!numberOfWrapperInCanceledByBodyShop + 1}" />-->
                                                        <tr>
                                                            <td colspan="2" class="slds-text-body_regular">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.PartNumber__c}</td>
                                                            <td class="slds-text-body_regular slds-text-align_center">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c}</td>
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Description__c}</td>
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Manufacturer__c}</td>
                                                            <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.FamilyOfSparePart__c}</td>
                                                                <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BrandOfSparePart__c}</td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.ExpectedDeliveryDuration__c}"
                                                                                rendered="{!!( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.CataloguePrice__c}"
                                                                                styleclass="unitPrice cataloguePrice"/>
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Quantity__c}"
                                                                                    styleclass="quantity_{!rowNumber}"
                                                                                    rendered="{!!(
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                                )}" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TotalPrice__c}"
                                                                                styleclass="totalPrice_{!rowNumber}"
                                                                                rendered="{!!(
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                            </td>
                                                            <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Discount__r.DistributorCode__c}"
                                                                                    rendered="{!!(  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle)}" />
                                                                </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="asDiscount axaDiscount_{!rowNumber}"
                                                                                rendered="{!!(  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle)}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXADiscount__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXADiscount__c}"
                                                                                 styleClass="asDiscount axaDiscount_{!rowNumber} percentage"
                                                                                 rendered="{!!(  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle)}" />
                                                            </td>
                                                            <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="rebate rebate_{!rowNumber}"
                                                                                    rendered="{!!(  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle) ||
                                                                                                hasDiscountManagement}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}"
                                                                                 styleClass="rebate rebate_{!rowNumber} percentage"
                                                                                 rendered="{!!( mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle) ||
                                                                                                hasDiscountManagement}" />
                                                                </td>
                                                            </apex:outputText>
                                                            
                                                            <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="bsDiscount bodyShopDiscount_{!rowNumber}"
                                                                                    rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice || 
                                                                                                !(mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle)}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}"
                                                                                 styleClass="bsDiscount bodyShopDiscount_{!rowNumber} percentage"
                                                                                 rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isDistributorPrice || 
                                                                                                !(mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle)}" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="extraAS extraAS_{!rowNumber}"
                                                                                    rendered="{!!(  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle)}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage"
                                                                                    rendered="{!!(  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle)}" />
                                                                    </td>
                                                                </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleclass="extraAS_{!rowNumber} slds-hide" />
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}"
                                                                                    styleclass="bodyShopDiscount_{!rowNumber} slds-hide" />
                                                                </apex:outputtext>
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c}"
                                                                                styleclass="addDiscount_{!rowNumber} slds-hide" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c}"
                                                                                styleclass="addDiscountAmount_{!rowNumber} slds-hide" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}"
                                                                                styleclass="rebate_{!rowNumber} slds-hide"
                                                                                rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                            (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyshopTotalPrice__c}"
                                                                                styleclass="bsTotalPrice_{!rowNumber} slds-hide" />

                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXATotalPrice__c}"
                                                                                styleclass="axaTotalPrice_{!rowNumber}"
                                                                                rendered="{!!(  mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle)}" />

                                                                <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                    <div class="popOverParent">
                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                        </span>
                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                            role="tooltip">
                                                                            <div class="slds-popover__body">
                                                                                {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c}" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!  mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c != null &&
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c != 0}">
                                                                    <div class="popOverParent">
                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                        </span>
                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                            role="tooltip">
                                                                            <div class="slds-popover__body">
                                                                                {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c}" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                            </td>
                                                            <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.PartList__r.Compliance__c}">
                                                                        <span class="slds-icon_container svgCompliance">
                                                                        </span>
                                                                    </apex:outputpanel>
                                                                </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center"
                                                                rowspan="{!mapIdOrderLineWrapper[originalOrderLineId].rowSpan}">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.DeliveryStatus__c}" />
                                                                <apex:outputText rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.DeliveryStatus__c == 'RETURNED' ||
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.DeliveryStatus__c == 'ERROR'}"><!-- RRJ 07/10/2022 C-004795 -->
                                                                    <div>
                                                                        {!$Label.Reason}: &nbsp;
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.DeliveryStatusReason__c}" />
                                                                    </div>
                                                                </apex:outputText>
                                                            </td>
                                                        </tr>
                                                        <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                        <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative}">
                                                            <tr class="optionalRow">
                                                                <td class="alternative"></td>
                                                                <td class="slds-text-body_regular">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Description__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Manufacturer__c}" />
                                                                </td>
                                                                <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BrandOfSparePart__c}" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.ExpectedDeliveryDuration__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CataloguePrice__c}"
                                                                                    styleclass="unitPrice cataloguePrice_{!rowNumber} cataloguePrice" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Quantity__c}"
                                                                                    styleclass="quantity quantity_{!rowNumber}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TotalPrice__c}"
                                                                                    styleclass="totalPrice_{!rowNumber}" />
                                                                </td>
                                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Discount__r.DistributorCode__c}" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="asDiscount axaDiscount_{!rowNumber}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage" />
                                                                </td>
                                                                <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="rebate rebate_{!rowNumber}">
                                                                            <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage" />
                                                                    </td>
                                                                </apex:outputText>
                                                                
                                                                <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="bodyShopDiscount_{!rowNumber}">
                                                                            <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    styleClass="bodyShopDiscount_{!rowNumber} percentage" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="extraAS extraAS_{!rowNumber}">
                                                                            <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage" />
                                                                        </td>
                                                                </apex:outputtext>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                        <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                        styleclass="extraAS_{!rowNumber} slds-hide" />
                                                                    </apex:outputtext>
                                                                    <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                        <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                        styleclass="bodyShopDiscount_{!rowNumber} slds-hide" />
                                                                    </apex:outputtext>
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}"
                                                                                    styleclass="addDiscount_{!rowNumber} slds-hide" />
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}"
                                                                                    styleclass="addDiscountAmount_{!rowNumber} slds-hide" />
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    styleclass="rebate_{!rowNumber} slds-hide"
                                                                                    rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                                (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyshopTotalPrice__c}"
                                                                                    styleclass="bsTotalPrice_{!rowNumber} slds-hide" />

                                                                    <div class="asPriceContainer">
                                                                        <div class="totalPriceContainer">
                                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXATotalPrice__c}"
                                                                                            styleclass="axaTotalPrice_{!rowNumber}" />
                                                                        </div>
                                                                        <div class="iconContainer">
                                                                            <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                                <div class="popOverParent">
                                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                                    </span>
                                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                        role="tooltip">
                                                                                        <div class="slds-popover__body">
                                                                                            {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}" />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputpanel>
                                                                            <apex:outputpanel rendered="{!  mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                                            mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != null &&
                                                                                                            mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != 0}">
                                                                                <div class="popOverParent">
                                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                                    </span>
                                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                        role="tooltip">
                                                                                        <div class="slds-popover__body">
                                                                                            {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}" />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputpanel>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                                <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartList__r.Compliance__c}"
                                                                                        style="{!IF(isEditable && isQuotation, 'margin-left:18px;','')}">
                                                                            <span class="slds-icon_container svgCompliance">
                                                                            </span>
                                                                        </apex:outputpanel>
                                                                    </td>
                                                                </apex:outputtext>
                                                                <td style="display:none;" />
                                                            </tr>
                                                            <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                        </apex:outputtext>
                                                        <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isBundle}">
                                                            <apex:variable var="bundleIndex" value="{!0}" />
                                                            <apex:repeat var="bundleOrderLine" value="{!mapIdOrderLineWrapper[originalOrderLineId].bundleItemList}">
                                                                <tr class="optionalRow">
                                                                    <td class="bundle"></td>
                                                                    <td class="slds-text-body_regular">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.PartNumber__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.Type__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.Description__c}"/>
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.Manufacturer__c}"/>
                                                                    </td>
                                                                    <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                        <td class="slds-text-body_regular slds-truncate">
                                                                            <apex:outputfield value="{!bundleOrderLine.bundleItem.FamilyOfSparePart__c}"/>
                                                                        </td>
                                                                        <td class="slds-text-body_regular slds-truncate">
                                                                            <apex:outputfield value="{!bundleOrderLine.bundleItem.BrandOfSparePart__c}"/>
                                                                        </td>
                                                                    </apex:outputtext>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.ExpectedDeliveryDuration__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.CataloguePrice__c}"
                                                                                        styleclass="unitPrice cataloguePrice_{!rowNumber} cataloguePrice"/>
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.Quantity__c}"
                                                                                        styleclass="quantity quantity_{!rowNumber}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.TotalPrice__c}"
                                                                                        styleclass="totalPrice_{!rowNumber}" />
                                                                    </td>
                                                                    <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <apex:outputfield value="{!bundleOrderLine.bundleItem.Discount__r.DistributorCode__c}" />
                                                                        </td>
                                                                    </apex:outputtext>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="asDiscount axaDiscount_{!rowNumber}"
                                                                                        rendered="{!hasDiscountManagement}">
                                                                            <apex:param value="{!bundleOrderLine.bundleItem.AXADiscount__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!bundleOrderLine.bundleItem.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage" />
                                                                    </td>
                                                                    <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                            styleclass="rebate rebate_{!rowNumber}"
                                                                                            rendered="{!hasDiscountManagement}">
                                                                                <apex:param value="{!bundleOrderLine.bundleItem.Rebate__c}" />
                                                                            </apex:outputtext>-->
                                                                            <apex:outputText value="{!bundleOrderLine.bundleItem.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage"
                                                                                    rendered="{!hasDiscountManagement}" />
                                                                        </td>
                                                                    </apex:outputText>
                                                                    
                                                                    <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                            styleclass="bodyShopDiscount_{!rowNumber}">
                                                                                <apex:param value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}" />
                                                                            </apex:outputtext>-->
                                                                            <apex:outputText value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}"
                                                                                    styleClass="bodyShopDiscount_{!rowNumber} percentage" />
                                                                            </td>
                                                                        </apex:outputtext>
                                                                        <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                            styleclass="extraAS extraAS_{!rowNumber}">
                                                                                <apex:param value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}" />
                                                                            </apex:outputtext>-->
                                                                            <apex:outputText value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage" />
                                                                            </td>
                                                                        </apex:outputtext>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                            <apex:outputtext value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}"
                                                                                            styleclass="extraAS_{!rowNumber} slds-hide" />
                                                                        </apex:outputtext>
                                                                        <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                            <apex:outputtext value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}"
                                                                                            styleclass="bodyShopDiscount_{!rowNumber} slds-hide" />
                                                                        </apex:outputtext>
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.AdditionnalDiscount__c}"
                                                                                        styleclass="addDiscount_{!rowNumber} slds-hide" />
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c}"
                                                                                        styleclass="addDiscountAmount_{!rowNumber} slds-hide" />
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.Rebate__c}"
                                                                                        styleclass="rebate_{!rowNumber} slds-hide"
                                                                                        rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                                    (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.BodyshopTotalPrice__c}"
                                                                                        styleclass="bsTotalPrice_{!rowNumber} slds-hide" />

                                                                        <div class="asPriceContainer">
                                                                            <div class="totalPriceContainer">
                                                                                <apex:outputtext value="{!bundleOrderLine.bundleItem.AXATotalPrice__c}"
                                                                                                styleclass="axaTotalPrice_{!rowNumber}" />
                                                                            </div>
                                                                            <div class="iconContainer">
                                                                                <apex:outputpanel rendered="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c != null}">
                                                                                    <div class="popOverParent">
                                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                                        </span>
                                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                            role="tooltip">
                                                                                            <div class="slds-popover__body">
                                                                                                {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                                <apex:outputfield value="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c}" />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </apex:outputpanel>
                                                                                <apex:outputpanel rendered="{!  bundleOrderLine.bundleItem.AdditionalDiscountAmount__c == null &&
                                                                                                                bundleOrderLine.bundleItem.AdditionnalDiscount__c != null &&
                                                                                                                bundleOrderLine.bundleItem.AdditionnalDiscount__c != 0}">
                                                                                    <div class="popOverParent">
                                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                                        </span>
                                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                            role="tooltip">
                                                                                            <div class="slds-popover__body">
                                                                                                {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                                <apex:outputfield value="{!bundleOrderLine.bundleItem.AdditionnalDiscount__c}" />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </apex:outputpanel>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <apex:outputpanel rendered="{!!bundleOrderLine.bundleItem.PartList__r.Compliance__c}"
                                                                                            style="{!IF(isEditable && isQuotation, 'margin-left:18px;','')}">
                                                                                <span class="slds-icon_container svgCompliance">
                                                                                </span>
                                                                            </apex:outputpanel>
                                                                        </td>
                                                                    </apex:outputtext>
                                                                    <td style="display:none;" />
                                                                </tr>
                                                                <apex:variable var="bundleIndex" value="{!bundleIndex + 1}" />
                                                                <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                            </apex:repeat>
                                                        </apex:outputtext>
                                                    </apex:outputtext>
                                                    <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginal &&
                                                                                mapIdOrderLineWrapper[originalOrderLineId].isCanceledByBodyshop}">
                                                        <!--<apex:variable var="numberOfWrapperInCanceledByBodyShop" value="{!numberOfWrapperInCanceledByBodyShop + 1}" />-->
                                                        <tr>
                                                            <td colspan="2" class="slds-text-body_regular">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}</td>
                                                            <td class="slds-text-body_regular slds-text-align_center">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c}</td>
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Description__c}</td>
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Manufacturer__c}</td>
                                                            <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}</td>
                                                                <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BrandOfSparePart__c}</td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.ExpectedDeliveryDuration__c}" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CataloguePrice__c}"
                                                                                styleclass="unitPrice cataloguePrice_{!rowNumber} cataloguePrice" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Quantity__c}"
                                                                                styleclass="quantity_{!rowNumber}" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TotalPrice__c}"
                                                                                styleclass="totalPrice_{!rowNumber}" />
                                                            </td>
                                                            <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Discount__r.DistributorCode__c}" />
                                                                </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="asDiscount axaDiscount_{!rowNumber}"
                                                                                rendered="{!hasDiscountManagement}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage" />
                                                            </td>
                                                            <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="rebate rebate_{!rowNumber}"
                                                                                    rendered="{!hasDiscountManagement}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage" />
                                                                </td>
                                                            </apex:outputText>
                                                            

                                                            <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="bodyShopDiscount_{!rowNumber}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    styleClass="bodyShopDiscount_{!rowNumber} percentage" />
                                                                    </td>
                                                            </apex:outputtext>
                                                            <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="extraAS extraAS_{!rowNumber}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage" />
                                                                    </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleclass="extraAS_{!rowNumber} slds-hide" />
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    styleclass="bodyShopDiscount_{!rowNumber} slds-hide"/>
                                                                </apex:outputtext>
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}"
                                                                                styleclass="addDiscount_{!rowNumber} slds-hide"/>
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}"
                                                                                styleclass="addDiscountAmount_{!rowNumber} slds-hide"/>
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                styleclass="rebate_{!rowNumber} slds-hide"
                                                                                rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                            (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyshopTotalPrice__c}"
                                                                                styleclass="bsTotalPrice_{!rowNumber} slds-hide" />

                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXATotalPrice__c}"
                                                                                styleclass="axaTotalPrice_{!rowNumber}" />
                                                                
                                                                <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                    <div class="popOverParent">
                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                        </span>
                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                            role="tooltip">
                                                                            <div class="slds-popover__body">
                                                                                {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!  mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != null &&
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != 0}">
                                                                    <div class="popOverParent">
                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                        </span>
                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                            role="tooltip">
                                                                            <div class="slds-popover__body">
                                                                                {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}" />
                                                                            </div>
                                                                        </div>
                                                                    </div>                                                                </apex:outputpanel>
                                                            </td>
                                                            <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartList__r.Compliance__c}">
                                                                        <span class="slds-icon_container svgCompliance">
                                                                        </span>
                                                                    </apex:outputpanel>
                                                                </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.DeliveryStatus__c}" />
                                                                <apex:outputText rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.DeliveryStatus__c == 'RETURNED' ||
                                                                                            mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.DeliveryStatus__c == 'ERROR'}">
                                                                    <div>
                                                                        {!$Label.Reason}: &nbsp;
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.DeliveryStatusReason__c}" />
                                                                    </div>
                                                                </apex:outputText>
                                                            </td>
                                                        </tr>
                                                        <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                    </apex:outputtext>
                                                </apex:repeat>
                                            </tbody>
                                        </table>
                                    </apex:outputText>


                                    <!-- ---------------------------------------------------------------- Not Selected By BodyShop ---------------------------------------------------------------- -->
                                    <apex:outputText rendered="{!numberOfWrapperInNotSelectedByBodyShop > 0}">
                                        <div class="slds-card__header slds-grid grid_flex-spread">
                                            <h2 class="slds-text-heading_small slds-truncate">{!$Label.NotSelectedByBodyShop}</h2>
                                        </div>
                                        <table class="slds-table slds-table_bordered">
                                            <thead>
                                                <tr>
                                                    <td class="slds-text-heading_label" colspan="2">{!$ObjectType.OrderLine__c.fields.PartNumber__c.label}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Type__c.label}</td>
                                                    <td class="slds-text-heading_label">{!$ObjectType.OrderLine__c.fields.Description__c.label}</td>
                                                    <td class="slds-text-heading_label">{!$ObjectType.OrderLine__c.fields.Manufacturer__c.label}</td>
                                                    <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                        <td class="slds-text-heading_label">{!$Label.POOL_Family}</td>
                                                        <td class="slds-text-heading_label">{!$Label.POOL_Brand}</td>
                                                    </apex:outputtext>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDEXPECTDELIVERY}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDUNITPRICE}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDQUANTITY}</td>
                                                    <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDTOTALPRICE}</td>
                                                    <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXADISCOUNT}</td>
                                                        <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                            <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Rebate__c.label}</td>
                                                        </apex:outputText>
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDBSDISCOUNT}</td>
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXATOTALPRICE}</td>
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDCOMPLIANT}</td>
                                                    </apex:outputtext>
                                                    <apex:outputtext rendered="{!hasDiscountManagement}">
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFDistributorCode}</td>
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXADISCOUNT}</td>
                                                        <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                            <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.Rebate__c.label}</td>
                                                        </apex:outputText>
                                                        <apex:outputtext rendered="{!IF(currentPurchaseOrder.TECH_AssessmentCountryCode__c!='DE',true,false)}">
                                                            <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFExtraAS}</td>
                                                        </apex:outputtext>
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$Label.VFORDERLINEFIELDAXATOTALPRICE}</td>
                                                    </apex:outputtext>
                                                    <td class="slds-text-heading_label slds-text-align_center">Accep.</td>
                                                    <apex:outputtext rendered="{!($ObjectType.OrderLine__c.fields.CancelReason__c.Accessible)}">
                                                        <td class="slds-text-heading_label slds-text-align_center">{!$ObjectType.OrderLine__c.fields.CancelReason__c.label}</td>
                                                    </apex:outputtext>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <apex:repeat var="originalOrderLineId" value="{!mapIdOrderLineWrapper}">
                                                    <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine != null &&
                                                                                mapIdOrderLineWrapper[originalOrderLineId].isNotSelectedByBodyshop &&
                                                                            mapIdOrderLineWrapper[originalOrderLineId].isPreselectedForOrder == hasPreselectedParts}">
                                                        <!--<apex:variable var="numberOfWrapperInNotSelectedByBodyShop" value="{!numberOfWrapperInNotSelectedByBodyShop + 1}" />-->
                                                        <tr>
                                                            <td colspan="2" class="slds-text-body_regular">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.PartNumber__c}</td>
                                                            <td class="slds-text-body_regular slds-text-align_center">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Type__c}</td>
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Description__c}</td>
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Manufacturer__c}</td>
                                                            <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.FamilyOfSparePart__c}</td>
                                                                <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BrandOfSparePart__c}</td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.ExpectedDeliveryDuration__c}"
                                                                                rendered="{!!( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.CataloguePrice__c}"
                                                                                styleclass="cataloguePrice" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Quantity__c}"
                                                                                styleclass="quantity_{!rowNumber}"
                                                                                rendered="{!!( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TotalPrice__c}"
                                                                                styleclass="totalPrice_{!rowNumber}"
                                                                                rendered="{!!( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                            </td>
                                                            <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Discount__r.DistributorCode__c}"
                                                                                    rendered="{!!( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                                </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="asDiscount axaDiscount_{!rowNumber}"
                                                                                rendered="{!!( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXADiscount__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXADiscount__c}"
                                                                                 styleClass="asDiscount axaDiscount_{!rowNumber} percentage"
                                                                                 rendered="{!!( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                            </td>
                                                            <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="rebate rebate_{!rowNumber}"
                                                                                    rendered="{!!( 
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                                )}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}"
                                                                                 styleClass="rebate rebate_{!rowNumber} percentage"
                                                                                 rendered="{!!( 
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                    mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                                )}" />
                                                                </td>
                                                            </apex:outputText>
                                                            
                                                            <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="bsDiscount bodyShopDiscount_{!rowNumber}"
                                                                                    rendered="{!!( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}"
                                                                                 styleClass="bsDiscount bodyShopDiscount_{!rowNumber} percentage"
                                                                                 rendered="{!!( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="extraAS extraAS_{!rowNumber}"
                                                                                    rendered="{!!( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage"
                                                                                    rendered="{!!( 
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative ||
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].isBundle
                                                                                            )}" />
                                                                    </td>
                                                                </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                        <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.TECH_ExtraAS__c}"
                                                                                        styleclass="extraAS_{!rowNumber} slds-hide" />
                                                                    </apex:outputtext>
                                                                    <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                        <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.BodyShopDiscount__c}"
                                                                                        styleclass="bodyShopDiscount_{!rowNumber} slds-hide" />
                                                                    </apex:outputtext>
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c}"
                                                                                    styleclass="addDiscount_{!rowNumber} slds-hide" />
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c}"
                                                                                    styleclass="addDiscountAmount_{!rowNumber} slds-hide" />
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.Rebate__c}"
                                                                                    styleclass="rebate_{!rowNumber} slds-hide"
                                                                                    rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                                (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AXATotalPrice__c}"
                                                                                    styleclass="axaTotalPrice_{!rowNumber} slds-hide" />
                                                                    <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                        <div class="popOverParent">
                                                                            <span class="slds-icon_container svgAddDiscount">
                                                                            </span>
                                                                            <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                role="tooltip">
                                                                                <div class="slds-popover__body">
                                                                                    {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c}" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </apex:outputpanel>
                                                                    <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c != null &&
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c != 0}">
                                                                        <div class="popOverParent">
                                                                            <span class="slds-icon_container svgAddDiscount">
                                                                            </span>
                                                                            <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                role="tooltip">
                                                                                <div class="slds-popover__body">
                                                                                    {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AdditionnalDiscount__c}" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </apex:outputpanel>
                                                            </td>
                                                            <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext rendered="{!isQuotation}">-->
                                                                        <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.PartList__r.Compliance__c}">
                                                                            <span class="slds-icon_container svgCompliance">
                                                                            </span>
                                                                        </apex:outputpanel>
                                                                    <!--</apex:outputtext>-->
                                                                </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center"
                                                                rowspan="{!mapIdOrderLineWrapper[originalOrderLineId].rowSpan}">
                                                                <input type="checkbox"
                                                                    class="multi-switch"
                                                                    unchecked-value="false"
                                                                    checked-value="true"
                                                                    value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.AcceptedCheck__c}"
                                                                    wrapperid="{!originalOrderLineId}"
                                                                    disabled="disabled" />
                                                            </td>
                                                            <apex:outputtext rendered="{!($ObjectType.OrderLine__c.fields.CancelReason__c.Accessible)}">
                                                                <td class="slds-text-body_regular slds-text-align_center"
                                                                    rowspan="{!mapIdOrderLineWrapper[originalOrderLineId].rowSpan}">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].originalOrderLine.CancelReason__c}"
                                                                                    styleclass="cancelReason" />
                                                                </td>
                                                            </apex:outputtext>
                                                        </tr>
                                                        <apex:variable var="rowNumber" value="{!rowNumber + 1}" />

                                                        <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isFinalAltenative}">
                                                            <tr class="optionalRow">
                                                                <td class="alternative"></td>
                                                                <td class="slds-text-body_regular">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Description__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-truncate">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Manufacturer__c}" />
                                                                </td>
                                                                <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BrandOfSparePart__c}" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.ExpectedDeliveryDuration__c}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CataloguePrice__c}"
                                                                                    styleclass="cataloguePrice_{!rowNumber} cataloguePrice" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Quantity__c}"
                                                                                    styleclass="quantity_{!rowNumber}" />
                                                                </td>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TotalPrice__c}"
                                                                                    styleclass="totalPrice_{!rowNumber}" />
                                                                </td>
                                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Discount__r.DistributorCode__c}" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="asDiscount axaDiscount_{!rowNumber}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage" />
                                                                </td>
                                                                <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="rebate rebate_{!rowNumber}">
                                                                            <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage" />
                                                                    </td>
                                                                </apex:outputText>
                                                                
                                                                <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="bsDiscount bodyShopDiscount_{!rowNumber}">
                                                                            <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    styleClass="bsDiscount bodyShopDiscount_{!rowNumber} percentage" />
                                                                    </td>
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="extraAS extraAS_{!rowNumber}">
                                                                            <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage" />
                                                                            </td>
                                                                    </apex:outputtext>
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <div class="asPriceContainer">
                                                                        <div class="totalPriceContainer">
                                                                            <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXATotalPrice__c}"
                                                                                            styleclass="axaTotalPrice_{!rowNumber}" />
                                                                        </div>
                                                                        <div class="iconContainer">
                                                                            <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                                <div class="popOverParent">
                                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                                    </span>
                                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                        role="tooltip">
                                                                                        <div class="slds-popover__body">
                                                                                            {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}" />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputpanel>
                                                                            <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                                        mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != null &&
                                                                                                        mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != 0}">
                                                                                <div class="popOverParent">
                                                                                    <span class="slds-icon_container svgAddDiscount">
                                                                                    </span>
                                                                                    <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                        role="tooltip">
                                                                                        <div class="slds-popover__body">
                                                                                            {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                            <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}" />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputpanel>
                                                                        </div>
                                                                    </div>
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}"
                                                                                    styleclass="addDiscount_{!rowNumber} slds-hide" />
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}"
                                                                                    styleclass="addDiscountAmount_{!rowNumber} slds-hide"/>
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    styleclass="rebate_{!rowNumber} slds-hide"
                                                                                    rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                            (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                    <apex:outputtext rendered="{!!hasDiscountManagement || mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PurchaseOrder__r.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                        <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                        styleclass="extraAS_{!rowNumber} slds-hide" />
                                                                    </apex:outputtext>
                                                                    <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                        <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                        styleclass="bodyShopDiscount_{!rowNumber} slds-hide" />
                                                                    </apex:outputtext>
                                                                </td>
                                                                <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartList__r.Compliance__c}">
                                                                            <span class="slds-icon_container svgCompliance">
                                                                            </span>
                                                                        </apex:outputpanel>
                                                                    </td>
                                                                </apex:outputtext>
                                                                <td style="display:none;" />
                                                            </tr>
                                                            <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                        </apex:outputtext>
                                                        <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isBundle}">
                                                            <apex:variable var="bundleIndex" value="{!0}" />
                                                            <apex:repeat var="bundleOrderLine" value="{!mapIdOrderLineWrapper[originalOrderLineId].bundleItemList}">
                                                                <tr class="optionalRow">
                                                                    <td class="bundle"></td>
                                                                    <td class="slds-text-body_regular">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.PartNumber__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.Type__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.Description__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-truncate">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.Manufacturer__c}" />
                                                                    </td>
                                                                    <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                        <td class="slds-text-body_regular slds-truncate">
                                                                            <apex:outputfield value="{!bundleOrderLine.bundleItem.FamilyOfSparePart__c}" />
                                                                        </td>
                                                                        <td class="slds-text-body_regular slds-truncate">
                                                                            <apex:outputfield value="{!bundleOrderLine.bundleItem.BrandOfSparePart__c}" />
                                                                        </td>
                                                                    </apex:outputtext>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputfield value="{!bundleOrderLine.bundleItem.ExpectedDeliveryDuration__c}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.CataloguePrice__c}"
                                                                                        styleclass="cataloguePrice_{!rowNumber} cataloguePrice" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.Quantity__c}"
                                                                                        styleclass="quantity quantity_{!rowNumber}" />
                                                                    </td>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.TotalPrice__c}"
                                                                                        styleclass="totalPrice_{!rowNumber}" />
                                                                    </td>
                                                                    <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <apex:outputfield value="{!bundleOrderLine.bundleItem.Discount__r.DistributorCode__c}" />
                                                                        </td>
                                                                    </apex:outputtext>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="asDiscount axaDiscount_{!rowNumber}">
                                                                            <apex:param value="{!bundleOrderLine.bundleItem.AXADiscount__c}" />
                                                                        </apex:outputtext>-->
                                                                        <apex:outputText value="{!bundleOrderLine.bundleItem.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage" />
                                                                    </td>
                                                                    <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                            styleclass="rebate rebate_{!rowNumber}">
                                                                                <apex:param value="{!bundleOrderLine.bundleItem.Rebate__c}" />
                                                                            </apex:outputtext>-->
                                                                            <apex:outputText value="{!bundleOrderLine.bundleItem.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage" />
                                                                        </td>
                                                                    </apex:outputText>
                                                                    
                                                                    <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                            styleclass="bsDiscount bodyShopDiscount_{!rowNumber}">
                                                                                <apex:param value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}" />
                                                                            </apex:outputtext>-->
                                                                            <apex:outputText value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}"
                                                                                    styleClass="bsDiscount bodyShopDiscount_{!rowNumber} percentage" />
                                                                            </td>
                                                                        </apex:outputtext>
                                                                        <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                            <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                            styleclass="extraAS extraAS_{!rowNumber}">
                                                                                <apex:param value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}" />
                                                                            </apex:outputtext>-->
                                                                            <apex:outputText value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage" />
                                                                            </td>
                                                                        </apex:outputtext>
                                                                    <td class="slds-text-body_regular slds-text-align_center">
                                                                        <div class="asPriceContainer">
                                                                            <div class="totalPriceContainer">
                                                                                <apex:outputtext value="{!bundleOrderLine.bundleItem.AXATotalPrice__c}"
                                                                                                styleclass="axaTotalPrice_{!rowNumber}" />
                                                                            </div>
                                                                            <div class="iconContainer">
                                                                                <apex:outputpanel rendered="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c != null}">
                                                                                    <div class="popOverParent">
                                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                                        </span>
                                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                            role="tooltip">
                                                                                            <div class="slds-popover__body">
                                                                                                {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                                <apex:outputfield value="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c}" />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </apex:outputpanel>
                                                                                <apex:outputpanel rendered="{!  bundleOrderLine.bundleItem.AdditionalDiscountAmount__c == null &&
                                                                                                                bundleOrderLine.bundleItem.AdditionnalDiscount__c != null &&
                                                                                                                bundleOrderLine.bundleItem.AdditionnalDiscount__c != 0}">
                                                                                    <div class="popOverParent">
                                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                                        </span>
                                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                                            role="tooltip">
                                                                                            <div class="slds-popover__body">
                                                                                                {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                                <apex:outputfield value="{!bundleOrderLine.bundleItem.AdditionnalDiscount__c}" />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </apex:outputpanel>
                                                                            </div>
                                                                        </div>
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.AdditionnalDiscount__c}"
                                                                                        styleclass="addDiscount_{!rowNumber} slds-hide" />
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.AdditionalDiscountAmount__c}"
                                                                                        styleclass="addDiscountAmount_{!rowNumber} slds-hide" />
                                                                        <apex:outputtext value="{!bundleOrderLine.bundleItem.Rebate__c}"
                                                                                        styleclass="rebate_{!rowNumber} slds-hide"
                                                                                        rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                                    (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                        <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                            <apex:outputtext value="{!bundleOrderLine.bundleItem.TECH_ExtraAS__c}"
                                                                                            styleclass="extraAS_{!rowNumber} slds-hide" />
                                                                        </apex:outputtext>
                                                                        <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                            <apex:outputtext value="{!bundleOrderLine.bundleItem.BodyShopDiscount__c}"
                                                                                            styleclass="bodyShopDiscount_{!rowNumber} slds-hide" />
                                                                        </apex:outputtext>
                                                                    </td>
                                                                    <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                        <td class="slds-text-body_regular slds-text-align_center">
                                                                            <apex:outputpanel rendered="{!!bundleOrderLine.bundleItem.PartList__r.Compliance__c}">
                                                                                <span class="slds-icon_container svgCompliance">
                                                                                </span>
                                                                            </apex:outputpanel>
                                                                        </td>
                                                                    </apex:outputtext>
                                                                    <td style="display:none;" />
                                                                </tr>
                                                                <apex:variable var="bundleIndex" value="{!bundleIndex + 1}" />
                                                                <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                            </apex:repeat>
                                                        </apex:outputtext>

                                                    </apex:outputtext>
                                                    <apex:outputtext rendered="{!mapIdOrderLineWrapper[originalOrderLineId].isFinalOriginal &&
                                                                                mapIdOrderLineWrapper[originalOrderLineId].isNotSelectedByBodyshop &&
                                                                            mapIdOrderLineWrapper[originalOrderLineId].isPreselectedForOrder == hasPreselectedParts}">
                                                        <!--<apex:variable var="numberOfWrapperInNotSelectedByBodyShop" value="{!numberOfWrapperInNotSelectedByBodyShop + 1}" />-->
                                                        <tr>
                                                            <td colspan="2" class="slds-text-body_regular">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartNumber__c}</td>
                                                            <td class="slds-text-body_regular slds-text-align_center">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Type__c}</td>
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Description__c}</td>
                                                            <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Manufacturer__c}</td>
                                                            <apex:outputtext rendered="{!activateFamilyBrand}"><!-- WCH 09/02/2021 C-004160 -->
                                                                <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.FamilyOfSparePart__c}</td>
                                                                <td class="slds-text-body_regular slds-truncate">{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BrandOfSparePart__c}</td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.ExpectedDeliveryDuration__c}" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CataloguePrice__c}"
                                                                                styleclass="cataloguePrice_{!rowNumber} cataloguePrice" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Quantity__c}"
                                                                                styleclass="quantity_{!rowNumber}" />
                                                            </td>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TotalPrice__c}"
                                                                                styleclass="totalPrice_{!rowNumber}" />
                                                            </td>
                                                            <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Discount__r.DistributorCode__c}" />
                                                                </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                styleclass="asDiscount axaDiscount_{!rowNumber}">
                                                                    <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}" />
                                                                </apex:outputtext>-->
                                                                <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXADiscount__c}"
                                                                                    styleClass="asDiscount axaDiscount_{!rowNumber} percentage" />
                                                            </td>
                                                            <apex:outputText rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && $ObjectType.OrderLine__c.fields.Rebate__c.Accessible}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                        styleclass="rebate rebate_{!rowNumber}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                    styleClass="rebate rebate_{!rowNumber} percentage" />
                                                                </td>
                                                            </apex:outputText>
                                                            
                                                            <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="bsDiscount bodyShopDiscount_{!rowNumber}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    styleClass="bsDiscount bodyShopDiscount_{!rowNumber} percentage"/>
                                                                </td>
                                                            </apex:outputtext>
                                                            <apex:outputtext rendered="{!hasDiscountManagement && PurchaseOrder__c.TECH_AssessmentCountryCode__c != 'DE'}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <!--<apex:outputtext value="{!PercentageFormatString}"
                                                                                    styleclass="extraAS extraAS_{!rowNumber}">
                                                                        <apex:param value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}" />
                                                                    </apex:outputtext>-->
                                                                    <apex:outputText value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleClass="extraAS extraAS_{!rowNumber} percentage" />
                                                                </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                <apex:outputtext rendered="{!!hasDiscountManagement || PurchaseOrder__c.TECH_AssessmentCountryCode__c == 'DE'}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.TECH_ExtraAS__c}"
                                                                                    styleclass="extraAS_{!rowNumber} slds-hide" />
                                                                </apex:outputtext>
                                                                <apex:outputtext rendered="{!hasDiscountManagement}">
                                                                    <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.BodyShopDiscount__c}"
                                                                                    styleclass="bodyShopDiscount_{!rowNumber} slds-hide" />
                                                                </apex:outputtext>
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}"
                                                                                styleclass="addDiscount_{!rowNumber} slds-hide" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}"
                                                                                styleclass="addDiscountAmount_{!rowNumber} slds-hide" />
                                                               <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.Rebate__c}"
                                                                                styleclass="rebate_{!rowNumber} slds-hide"
                                                                                rendered="{!currentPurchaseOrder.TECH_AssessmentCountryCode__c != 'FR' || 
                                                                                            (currentPurchaseOrder.TECH_AssessmentCountryCode__c == 'FR' && !$ObjectType.OrderLine__c.fields.Rebate__c.Accessible)}" />
                                                                <apex:outputtext value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AXATotalPrice__c}"
                                                                                styleclass="axaTotalPrice_{!rowNumber}" />
                                                                <apex:outputpanel rendered="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c != null}">
                                                                    <div class="popOverParent">
                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                        </span>
                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                            role="tooltip">
                                                                            <div class="slds-popover__body">
                                                                                {!$ObjectType.OrderLine__c.fields.AdditionalDiscountAmount__c.label} : &nbsp;
                                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c}" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!  mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionalDiscountAmount__c == null &&
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != null &&
                                                                                                mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c != 0}">
                                                                    <div class="popOverParent">
                                                                        <span class="slds-icon_container svgAddDiscount">
                                                                        </span>
                                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_right popOverDiv-right"
                                                                            role="tooltip">
                                                                            <div class="slds-popover__body">
                                                                                {!$ObjectType.OrderLine__c.fields.AdditionnalDiscount__c.label} : &nbsp;
                                                                                <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AdditionnalDiscount__c}" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                            </td>
                                                            <apex:outputtext rendered="{!!hasDiscountManagement}">
                                                                <td class="slds-text-body_regular slds-text-align_center">
                                                                    <apex:outputpanel rendered="{!!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.PartList__r.Compliance__c}">
                                                                        <span class="slds-icon_container svgCompliance">
                                                                        </span>
                                                                    </apex:outputpanel>
                                                                </td>
                                                            </apex:outputtext>
                                                            <td class="slds-text-body_regular slds-text-align_center">
                                                                    <input type="checkbox"
                                                                        class="multi-switch"
                                                                        unchecked-value="false"
                                                                        checked-value="true"
                                                                        value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.AcceptedCheck__c}"
                                                                        wrapperid="{!originalOrderLineId}"
                                                                        disabled="disabled" />
                                                            </td>
                                                            <apex:outputtext rendered="{!($ObjectType.OrderLine__c.fields.CancelReason__c.Accessible)}">
                                                                <td class="slds-text-body_regular slds-text-align_center"
                                                                    rowspan="{!mapIdOrderLineWrapper[originalOrderLineId].rowSpan}">
                                                                    <apex:outputfield value="{!mapIdOrderLineWrapper[originalOrderLineId].finalOrderLine.CancelReason__c}"
                                                                                    styleclass="cancelReason" />
                                                                </td>
                                                            </apex:outputtext>
                                                        </tr>
                                                        <apex:variable var="rowNumber" value="{!rowNumber + 1}" />
                                                    </apex:outputtext>
                                                </apex:repeat>
                                            </tbody>
                                        </table>
                                    </apex:outputText>
                                </apex:outputText>

                                
                                <script>
                                    calculateTotalForWholeTable({!rowNumber});
                                    calculateTotalForNewWholeTable({!rowNumberNewOL});
                                    formatPrice();
                                    formatPercentage();
                                    renderAllIcons();
                                </script>
                            </div>
                        </div>
                    </div>

                    <div id="confirmationModal"
                        class="slds-modal"
                        aria-hidden="false"
                        role="dialog">
                        <div class="slds-modal__container">
                            <div class="slds-modal__header">
                                <h2 id="modalContentsHeaderValidate" class="slds-text-heading_medium">{!$Label.ConfirmJSTitle}</h2><!-- WCH 20/05/2019 C-003129 add div id -->
                                <h2 id="modalContentsHeaderUpdateStock" class="slds-text-heading_medium"></h2><!-- WCH 20/05/2019 C-003129 add div-->
                            </div>
                            <div class="slds-modal__content slds-p-around_medium">
                                <div id="modalContentsValidate"><!-- WCH 20/05/2019 C-003129 add div id -->
                                    <p>
                                        {!$Label.ConfirmJS}
                                    </p>
                                </div>
                                <div id="modalContentsUpdateStock"></div><!-- WCH 20/05/2019 C-003129 add div-->
                            </div>
                            <div class="slds-modal__footer">
                                <div id="modalContentsFooterValidate"><!-- WCH 20/05/2019 C-003129 add div-->
                                    <apex:commandbutton value="{!$Label.ModalOK}"
                                                        action="{!validatePurchaseOrder}"
                                                        styleclass="slds-button slds-button_neutral slds-button_brand clickOnce"
                                                        rerender="frm"
                                                        status="statusSpinner" />
                                    <input type="button"
                                        class="slds-button slds-button_neutral"
                                        value="{!$Label.ModalCancel}"
                                        onclick="hideModal();" />
                                </div>
                                <div id="modalContentsFooterUpdateStock"></div><!-- WCH 20/05/2019 C-003129 add div-->
                            </div>
                        </div>
                    </div>
                    <div id="confirmationModalBackdrop" class="slds-backdrop"></div>
                    <script>
                        if({!canRefresh})
                        {
                            window.parent.location.href = '/{!PurchaseOrder__c.Id}';
                        }
                    </script>
                    
                    <div id="spinner"
                        class="slds-spinner_container hide positionFixed">
                        <div class="slds-spinner slds-spinner_large" aria-hidden="false" role="alert">
                            <div class="slds-spinner__dot-a"></div>
                            <div class="slds-spinner__dot-b"></div>
                        </div>
                    </div>
                </div>
                
                <apex:actionstatus onstart="$j('#spinner').show();" onstop="$j('#spinner').hide();" id="statusSpinner" />

                <!-- Error Manager -->
                <apex:outputPanel id="errorMessage">
                    <div id="toastMessage" class="slds-notify_container slds-hide">
                        <div class="slds-notify slds-notify_toast slds-theme_error slds-grid_align-center" role="alert">
                            <button class="slds-button slds-notify__close slds-button_icon-inverse" title="{!$Label.Close}" type="button" onclick="hideError();"/>
                            <div class="slds-notify__content">
                                <p class="slds-text-align_center customErrorMsg"></p>
                                <apex:pagemessages id="toastErrorMessage" escape="false" />
                            </div>
                        </div>
                    </div>

                    <div id="errorModal" class="slds-modal slds-modal_prompt" aria-hidden="false" role="dialog">
                        <div class="slds-modal__container">
                            <div class="slds-modal__header slds-theme_error slds-theme_alert-texture">
                                <h2 class="slds-text-heading_medium">{!$Label.ErrorModalHeader}</h2>
                            </div>
                            <div class="slds-modal__content slds-p-around_medium">
                                <p id="errorModalBody" class="slds-m-bottom_medium">
                                    {!$Label.ErrorModalBody}
                                </p>
                                <apex:pagemessages escape="false" />
                            </div>
                            <div class="slds-modal__footer slds-theme_default">
                                <input type="button" class="slds-button slds-button_destructive" value="{!$Label.Close}" onclick="hideError();" />
                            </div>
                        </div>
                    </div>
                    <div id="errorModalBackdrop" class="slds-backdrop"></div>
                </apex:outputPanel>

                <script>
                    setButtonLocking();
                    showError({!hasErrors}, {!isToastError});
                    checkPageMessage({!hasErrors});

                    //AMI
                    renderColoredStatus();

                    $j('.multi-switch').multiSwitch({
                                                        textChecked     : '{!$Label.Suppliable}',
                                                        textNotChecked  : '{!$Label.Unsuppliable}',
                                                        functionOnChange: function (switches)
                                                        {
                                                            // Only 1 button is clicked at a time
                                                            if($j(switches).attr("value") == "YES")
                                                            {
                                                                setToSuppliable($j(switches).attr("wrapperId"));
                                                            }
                                                            else if($j(switches).attr("value") == "NO")
                                                            {
                                                                setToUnsuppliable($j(switches).attr("wrapperId"));
                                                            }
                                                        }
                                                    });
                    $j('.initialiseClear').each(function(index, element)
                    {
                        numerizeItWithClearInput(element, '{!decimalSeparator}');
                    });

                    $j('.initialiseClearNegative').each(function(index, element)
                    {
                        numerizeItWithClearAndNegative(element, '{!decimalSeparator}');
                    });

                    $j(".svgAddDiscount").hover
                        (
                            function()
                            {
                                showPopOver(this);
                            },
                            function()
                            {
                                hidePopOver(this);
                            }
                        );

                    /*
                    AMI : 04/10/18 : C-002045 - if advance case management enable, color status red when associated offer line is error
                    data attribute explanation:
                    data-hasError --> applies to all output text where corresponding offer status is error and advance case mgt enabled
                    data-statusmanaged --> applies to all output text where corresponding ol status is managed
                    data-isErrored --> applies to all input text where corresponding offer status is error and advance case mgt enabled
                    */
                    
                    //AMI 04/10/18 : C-002045 - if advance case management enable, color status red when associated offer line is error
                    function renderColoredStatus(){
                        if({!isAdCaseMgt}){
                            //output display - status issue
                            $j('[data-haserror="true"][data-statusmanaged="false"] span').each(function(index, element) {
                                $j(element).css('background-color','red');
                                $j(element).css('color','white');
                            });

                            //output display - status managed
                            $j('[data-statusmanaged="true"] span').each(function(index, element) {
                                $j(element).css('background-color','green');
                                $j(element).css('color','white');
                            });

                            //input display - status issue // status managed
                            $j('select option').each(function(index, element) {
                                if($j(element).val() === "{!statusIssue}" && $j(element).prop("selected")){
                                    $j(element).parent().css('background-color','red');
                                    $j(element).parent().css('color','white');
                                }else if($j(element).val() === "{!statusManaged}" && $j(element).prop("selected")){
                                    $j(element).parent().css('background-color','green');
                                    $j(element).parent().css('color','white');
                                }
                            });
                        }
                    }

                    //AMI 04/10/18 : C-002045 - remove status managed,cancelled,returned for all non es users without case mgt
                    function removeStatus(){
                        //remove cancelled,returned,managed for all non es distributor users
                        if(window.params.userRole.toLowerCase().indexOf('distributor') >= 0){
                            $j('[data-iserrored="false"] select option').each(function(index, element) {
                                if(($j(element).val() === '{!statusCanceled}' ||
                                    $j(element).val() === '{!statusReturned}' ||
                                    $j(element).val() === '{!statusManaged}') && !$j(element).prop("selected")){
                                        $j(element).remove();
                                }
                            });

                            //AMI 04/10/18 : C-002045 - if parts is in error for advance case mgt, distributeurs must
                            //                          only see cancelled,returned and managed
                            $j('[data-iserrored="true"] select option').each(function(index, element) {
                                if(!(/*$j(element).val() === '{!statusCanceled}' || WCH 29/01/2021 C-004146*/
                                    $j(element).val() === '{!statusReturned}' ||
                                    $j(element).val() === '{!statusManaged}' ||
                                    $j(element).prop("selected"))){
                                        $j(element).remove();
                                }
                            });

                            //AMI 13/11/18 : C-002045 - if parts is in error for advance case mgt, the distributor must not
                            //                          have the possibility to modify the part status
                            if({!isAdCaseMgt}){
                                $j('[data-iserrored="false"] select').each(function(index, element) {
                                    $j(element).prop('disabled', 'disabled');
                                });
                            }
                        }

                        //remove managed for all non es admin users
                        if(window.params.userRole.toLowerCase().indexOf('alphascale') >= 0 || 
                            window.params.userRole.toLowerCase().indexOf('alpha scale') >= 0 ){
                                //when data attribute is false
                                $j('[data-iserrored="false"] select option').each(function(index, element) {
                                    if($j(element).val() === '{!statusManaged}' && !$j(element).prop("selected")){
                                            $j(element).remove();
                                    }
                                });
                        }
                    }

                    //WCH 20/05/2019 C-003129 Update Stock info button location is not usefull
                    function showValidateComponents(){
                        $j('[id ^=modalContents][id $=UpdateStock]').hide();
                        $j('[id ^=modalContents][id $=Validate]').show();
                        window.parent.location='/{!PurchaseOrder__c.Id}';
                    }
                    $j("#UpdateStockInfoButton").click(function(){
                        var pageSrc = '/apex/VFP_RESTUpdatePOOrderLines?id={!PurchaseOrder__c.Id}';
                        var height = 200;
                        $j("#modalContentsUpdateStock").html('<iframe id=\'updateStockInfoIframe\' src=' + pageSrc + ' style="border:none;" width="100%" height="'+ (height - 30)+'px" />');
                        $j("#modalContentsFooterUpdateStock").html('<input class="slds-button slds-button_neutral" onclick="hideModal();showValidateComponents();" type="button" value="'+'{!$Label.ModalOK}'+'">');
                        $j("#modalContentsHeaderUpdateStock").html('{!$Label.UpdateStockInfo}');
                        $j('[id ^=modalContents][id $=UpdateStock]').show();
                        $j('[id ^=modalContents][id $=Validate]').hide();
                        showModal();
                    });
                    //WCH 05/08/2019 C-003247 Pop up when Discount is less than 10 in Offer Process
                    function checkTechExtraAsDiscount(){
                        console.log('checkTechExtraAsDiscount>>{!currentPurchaseOrder.TECH_AssessmentCountryCode__c}');
                        console.log('checkTechExtraAsDiscount>>{!showPopUpForAsDiscount}');
                        var allAsDiscountSmaller=false;
                        if({!showPopUpForAsDiscount})
                            $j("input:text.extraAS").each(function(index, element) {
                                console.log('checkTechExtraAsDiscount>>'+index+'>>>'+$j(element).val());
                                if(parseFloat($j(element).val())<parseFloat('{!minAsDiscountToShowPopUp}')){
                                    allAsDiscountSmaller=true;
                                }
                            });
                        if(allAsDiscountSmaller){
                            alert('{!$Label.AtLeastOneDiscountLessThan10}');
                        }
                    }

                    // ARA 03/09/2020 C-003914 
                    function reloadParent(){
                            
                            window.parent.location = '/{!PurchaseOrder__c.Id}';
                            
                            }

                    $j('.orderconfirmationbutton').click(function()
                    {
                        
                        // onClick="this.disabled=true;"
                        // alert('processing the order confirmation');
                        $j('.orderconfirmationbutton').prop("disabled",true);
                        
                        
                    });
                    //WCH 15/05/2021 C-004160
                    function updateFamilyBrandOptions(thewi,thefamily){
                        setFamilyBrandOptions(thewi,thefamily);
                    }
                    
                </script>
                <apex:actionfunction name="setFamilyBrandOptions"
                                    action="{!setWrapperBrand}"
                                    rerender="frm"
                                    status="statusSpinner">
                    <apex:param name="wrapperId" value="" assignto="{!wrapperId}" />
                    <apex:param name="wrapperIdFamily" value="" assignto="{!wrapperIdFamily}" />
                </apex:actionfunction><!--WCH 15/05/2021 C-004160-->
                <apex:actionfunction name="setToSuppliable"
                                    action="{!setWrapperSuppliable}"
                                    rerender="frm"
                                    status="statusSpinner">
                    <apex:param name="wrapperId"
                                value=""
                                assignto="{!wrapperId}" />
                </apex:actionfunction>
                <apex:actionfunction name="setToUnsuppliable"
                                    action="{!setWrapperUnsuppliable}"
                                    rerender="frm"
                                    status="statusSpinner">
                    <apex:param name="wrapperId"
                                value=""
                                assignto="{!wrapperId}" />
                </apex:actionfunction>
                <apex:actionfunction name="changeDistributorCode"
                                    action="{!onSelectDistributorCode}"
                                    rerender="frm"
                                    status="statusSpinner">
                    <apex:param name="wrapperId"
                                value=""
                                assignto="{!wrapperId}" />
                    <apex:param name="bundleIndex"
                                value=""
                                assignto="{!bundleItemIndexChanged}" />
                </apex:actionfunction>
                <apex:actionfunction name="updateSpecificOrderLine"
                                    action="{!updateSpecificOrderLine}"
                                    rerender="frm"
                                    status="statusSpinner">
                    <apex:param name="wrapperId"
                                value=""
                                assignto="{!wrapperId}" />
                    <apex:param name="bundleIndex"
                                value=""
                                assignto="{!bundleItemIndexChanged}" />
                </apex:actionfunction>  
                <apex:actionfunction name="updateSpecificOrderLineBundleFB"
                                    action="{!updateSpecificOrderLineBundleFB}"
                                    rerender="frm"
                                    status="statusSpinner">
                    <apex:param name="wrapperId"
                                value=""
                                assignto="{!wrapperId}" />
                    <apex:param name="bundleIndex"
                                value=""
                                assignto="{!bundleItemIndexChanged}" />
                    <apex:param name="wrapperIdFamily"
                                value=""
                                assignto="{!wrapperIdFamily}" />
                </apex:actionfunction><!--WCH 15/05/2021 C-004160-->
            </apex:form>
        </body>
    </html>
</apex:page>